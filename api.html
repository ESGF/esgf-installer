

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Base Components &mdash; esgf-installer beta documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ESGF Installer Issue Tracking Guidelines" href="issues.html" />
    <link rel="prev" title="Autoinstaller Configuration Options" href="autoinstall_usage.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> esgf-installer
          

          
          </a>

          
            
            
              <div class="version">
                3.0b1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert_howto.html">ESGF Certificate Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">ESGF Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="autoinstall_usage.html">Autoinstaller Configuration Options</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Base Components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-esg_apache_manager">ESG Apache Manager Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-esg_postgres">ESG Postgres Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-esg_setup">ESG Setup Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-esg_tomcat_manager">ESG Tomcat Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#data-node-components">Data Node Components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#esg-publisher-module">ESG Publisher Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-orp">ESG ORP Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-thredds">ESG Thredds Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-esg_cert_manager">ESG Cert Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-esg_functions">ESG Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-esg_purge">ESG Purge</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#index-node-components">Index Node Components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-esg_search">ESG Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-solr">Solr</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-esg_cog">CoG</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#idp-node-components">IDP Node Components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-esg_security">ESG Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-globus">Globus</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-idp">IDP</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="issues.html">ESGF Installer Issue Tracking Guidelines</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contribute_docs.html">Contributing to Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">esgf-installer</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Base Components</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="base-components">
<h1>Base Components<a class="headerlink" href="#base-components" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-esg_apache_manager">
<span id="esg-apache-manager-module"></span><h2>ESG Apache Manager Module<a class="headerlink" href="#module-esg_apache_manager" title="Permalink to this headline">¶</a></h2>
<p>Module for installing Apache and mod_wsgi. Also contains Apache process management functions</p>
<dl class="function">
<dt id="esg_apache_manager.check_apache_status">
<code class="descclassname">esg_apache_manager.</code><code class="descname">check_apache_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_apache_manager.html#check_apache_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_apache_manager.check_apache_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Check httpd status</p>
</dd></dl>

<dl class="function">
<dt id="esg_apache_manager.check_for_apache_installation">
<code class="descclassname">esg_apache_manager.</code><code class="descname">check_for_apache_installation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_apache_manager.html#check_for_apache_installation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_apache_manager.check_for_apache_installation" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for existing httpd installation</p>
</dd></dl>

<dl class="function">
<dt id="esg_apache_manager.copy_apache_conf_files">
<code class="descclassname">esg_apache_manager.</code><code class="descname">copy_apache_conf_files</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_apache_manager.html#copy_apache_conf_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_apache_manager.copy_apache_conf_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy custom apache conf files</p>
</dd></dl>

<dl class="function">
<dt id="esg_apache_manager.install_apache_httpd">
<code class="descclassname">esg_apache_manager.</code><code class="descname">install_apache_httpd</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_apache_manager.html#install_apache_httpd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_apache_manager.install_apache_httpd" title="Permalink to this definition">¶</a></dt>
<dd><p>Install apache from yum</p>
</dd></dl>

<dl class="function">
<dt id="esg_apache_manager.install_mod_wsgi">
<code class="descclassname">esg_apache_manager.</code><code class="descname">install_mod_wsgi</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_apache_manager.html#install_mod_wsgi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_apache_manager.install_mod_wsgi" title="Permalink to this definition">¶</a></dt>
<dd><p>Have to ensure python is install properly with the shared library for mod_wsgi installation to work</p>
</dd></dl>

<dl class="function">
<dt id="esg_apache_manager.make_python_eggs_dir">
<code class="descclassname">esg_apache_manager.</code><code class="descname">make_python_eggs_dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_apache_manager.html#make_python_eggs_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_apache_manager.make_python_eggs_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Create Python egg directories</p>
</dd></dl>

<dl class="function">
<dt id="esg_apache_manager.restart_apache">
<code class="descclassname">esg_apache_manager.</code><code class="descname">restart_apache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_apache_manager.html#restart_apache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_apache_manager.restart_apache" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart httpd server</p>
</dd></dl>

<dl class="function">
<dt id="esg_apache_manager.run_apache_config_test">
<code class="descclassname">esg_apache_manager.</code><code class="descname">run_apache_config_test</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_apache_manager.html#run_apache_config_test"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_apache_manager.run_apache_config_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Run httpd config test</p>
</dd></dl>

<dl class="function">
<dt id="esg_apache_manager.start_apache">
<code class="descclassname">esg_apache_manager.</code><code class="descname">start_apache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_apache_manager.html#start_apache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_apache_manager.start_apache" title="Permalink to this definition">¶</a></dt>
<dd><p>Start httpd server</p>
</dd></dl>

<dl class="function">
<dt id="esg_apache_manager.stop_apache">
<code class="descclassname">esg_apache_manager.</code><code class="descname">stop_apache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_apache_manager.html#stop_apache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_apache_manager.stop_apache" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop httpd server</p>
</dd></dl>

</div>
<div class="section" id="module-esg_postgres">
<span id="esg-postgres-module"></span><h2>ESG Postgres Module<a class="headerlink" href="#module-esg_postgres" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="esg_postgres.backup_db">
<code class="descclassname">esg_postgres.</code><code class="descname">backup_db</code><span class="sig-paren">(</span><em>db_name</em>, <em>schema=None</em>, <em>backup_dir='/etc/esgf_db_backup'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#backup_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.backup_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Backup database to directory specified by backup_dir</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.build_connection_string">
<code class="descclassname">esg_postgres.</code><code class="descname">build_connection_string</code><span class="sig-paren">(</span><em>user</em>, <em>db_name=None</em>, <em>host=None</em>, <em>password=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#build_connection_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.build_connection_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the db connection string using the params as options</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.check_existing_pg_version">
<code class="descclassname">esg_postgres.</code><code class="descname">check_existing_pg_version</code><span class="sig-paren">(</span><em>psql_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#check_existing_pg_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.check_existing_pg_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the version number if a previous Postgres installation is detected</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.connect_to_db">
<code class="descclassname">esg_postgres.</code><code class="descname">connect_to_db</code><span class="sig-paren">(</span><em>user</em>, <em>db_name=None</em>, <em>host='/tmp'</em>, <em>password=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#connect_to_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.connect_to_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to database</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.create_database">
<code class="descclassname">esg_postgres.</code><code class="descname">create_database</code><span class="sig-paren">(</span><em>database_name</em>, <em>cursor=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#create_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.create_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Create database in postgres</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.create_pg_pass_file">
<code class="descclassname">esg_postgres.</code><code class="descname">create_pg_pass_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#create_pg_pass_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.create_pg_pass_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the file to store login passwords for psql</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.create_pg_publisher_user">
<code class="descclassname">esg_postgres.</code><code class="descname">create_pg_publisher_user</code><span class="sig-paren">(</span><em>cursor</em>, <em>db_user_password</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#create_pg_publisher_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.create_pg_publisher_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates postgres user for the ESGF Publisher (esgcet by default)</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.create_pg_super_user">
<code class="descclassname">esg_postgres.</code><code class="descname">create_pg_super_user</code><span class="sig-paren">(</span><em>psycopg2_cursor</em>, <em>db_user_password</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#create_pg_super_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.create_pg_super_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Create postgres super user</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.initialize_postgres">
<code class="descclassname">esg_postgres.</code><code class="descname">initialize_postgres</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#initialize_postgres"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.initialize_postgres" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up postgres data directory</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.list_roles">
<code class="descclassname">esg_postgres.</code><code class="descname">list_roles</code><span class="sig-paren">(</span><em>conn=None</em>, <em>user_name='postgres'</em>, <em>db_name='postgres'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#list_roles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.list_roles" title="Permalink to this definition">¶</a></dt>
<dd><p>List all roles</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.list_tables">
<code class="descclassname">esg_postgres.</code><code class="descname">list_tables</code><span class="sig-paren">(</span><em>conn=None</em>, <em>user_name='postgres'</em>, <em>db_name='postgres'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#list_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.list_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>List all tables in current database</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.list_users">
<code class="descclassname">esg_postgres.</code><code class="descname">list_users</code><span class="sig-paren">(</span><em>conn=None</em>, <em>user_name='postgres'</em>, <em>db_name='postgres'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#list_users"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.list_users" title="Permalink to this definition">¶</a></dt>
<dd><p>List all users in database</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.log_postgres_properties">
<code class="descclassname">esg_postgres.</code><code class="descname">log_postgres_properties</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#log_postgres_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.log_postgres_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Write postgres properties to /esg/config/esgf.properties</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.main">
<code class="descclassname">esg_postgres.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Main function</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.postgres_clean_schema_migration">
<code class="descclassname">esg_postgres.</code><code class="descname">postgres_clean_schema_migration</code><span class="sig-paren">(</span><em>repository_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#postgres_clean_schema_migration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.postgres_clean_schema_migration" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes entries from the esgf_migrate_version table if any exist
where repository_id matches an SQL LIKE to the first argument</p>
<p>The SQL LIKE strings are generally defined in
“src/python/esgf/&lt;reponame&gt;/schema_migration/migrate.cfg” in
each relevant repository.</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.postgres_list_db_schemas">
<code class="descclassname">esg_postgres.</code><code class="descname">postgres_list_db_schemas</code><span class="sig-paren">(</span><em>conn=None</em>, <em>user_name='postgres'</em>, <em>db_name='postgres'</em>, <em>password=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#postgres_list_db_schemas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.postgres_list_db_schemas" title="Permalink to this definition">¶</a></dt>
<dd><p>This prints a list of all schemas known to postgres.</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.postgres_list_dbs">
<code class="descclassname">esg_postgres.</code><code class="descname">postgres_list_dbs</code><span class="sig-paren">(</span><em>conn=None</em>, <em>user_name='postgres'</em>, <em>db_name='postgres'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#postgres_list_dbs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.postgres_list_dbs" title="Permalink to this definition">¶</a></dt>
<dd><p>This prints a list of all databases known to postgres.</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.postgres_list_schemas_tables">
<code class="descclassname">esg_postgres.</code><code class="descname">postgres_list_schemas_tables</code><span class="sig-paren">(</span><em>conn=None</em>, <em>user_name='postgres'</em>, <em>db_name='postgres'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#postgres_list_schemas_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.postgres_list_schemas_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>List all Postgres tables in all schemas, in the schemaname.tablename format, in the ESGF database</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.postgres_status">
<code class="descclassname">esg_postgres.</code><code class="descname">postgres_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#postgres_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.postgres_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the status of the postgres server</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.restart_postgres">
<code class="descclassname">esg_postgres.</code><code class="descname">restart_postgres</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#restart_postgres"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.restart_postgres" title="Permalink to this definition">¶</a></dt>
<dd><p>Restarts the postgres server</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.setup_hba_conf_file">
<code class="descclassname">esg_postgres.</code><code class="descname">setup_hba_conf_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#setup_hba_conf_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.setup_hba_conf_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the static pg_hba.conf file to proper location</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.setup_postgres">
<code class="descclassname">esg_postgres.</code><code class="descname">setup_postgres</code><span class="sig-paren">(</span><em>default_continue_install='N'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#setup_postgres"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.setup_postgres" title="Permalink to this definition">¶</a></dt>
<dd><p>Installs postgres</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.setup_postgres_conf_file">
<code class="descclassname">esg_postgres.</code><code class="descname">setup_postgres_conf_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#setup_postgres_conf_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.setup_postgres_conf_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies postgres.conf file to proper location</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.start_postgres">
<code class="descclassname">esg_postgres.</code><code class="descname">start_postgres</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#start_postgres"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.start_postgres" title="Permalink to this definition">¶</a></dt>
<dd><p>Start db</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.stop_postgres">
<code class="descclassname">esg_postgres.</code><code class="descname">stop_postgres</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#stop_postgres"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.stop_postgres" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops the postgres server</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.write_postgress_env">
<code class="descclassname">esg_postgres.</code><code class="descname">write_postgress_env</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#write_postgress_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.write_postgress_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Write postgres environment properties to /etc/esg.env</p>
</dd></dl>

<dl class="function">
<dt id="esg_postgres.write_postgress_install_log">
<code class="descclassname">esg_postgres.</code><code class="descname">write_postgress_install_log</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_postgres.html#write_postgress_install_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_postgres.write_postgress_install_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Write postgres version to install manifest</p>
</dd></dl>

</div>
<div class="section" id="module-esg_setup">
<span id="esg-setup-module"></span><h2>ESG Setup Module<a class="headerlink" href="#module-esg_setup" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="esg_setup.check_if_root">
<code class="descclassname">esg_setup.</code><code class="descname">check_if_root</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_setup.html#check_if_root"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_setup.check_if_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to see if the user has root privileges</p>
</dd></dl>

<dl class="function">
<dt id="esg_setup.check_os">
<code class="descclassname">esg_setup.</code><code class="descname">check_os</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_setup.html#check_os"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_setup.check_os" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the operating system on server is Redhat or CentOS</p>
</dd></dl>

<dl class="function">
<dt id="esg_setup.check_prerequisites">
<code class="descclassname">esg_setup.</code><code class="descname">check_prerequisites</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_setup.html#check_prerequisites"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_setup.check_prerequisites" title="Permalink to this definition">¶</a></dt>
<dd><p>A check for what is expected to be on the system a-priori that we are
not going to install or be responsible for.</p>
</dd></dl>

<dl class="function">
<dt id="esg_setup.create_esg_directories">
<code class="descclassname">esg_setup.</code><code class="descname">create_esg_directories</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_setup.html#create_esg_directories"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_setup.create_esg_directories" title="Permalink to this definition">¶</a></dt>
<dd><p>Create directories to hold ESGF scripts, config files, and logs</p>
</dd></dl>

<dl class="function">
<dt id="esg_setup.exit_on_false">
<code class="descclassname">esg_setup.</code><code class="descname">exit_on_false</code><span class="sig-paren">(</span><em>assertion</em>, <em>err_msg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_setup.html#exit_on_false"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_setup.exit_on_false" title="Permalink to this definition">¶</a></dt>
<dd><p>Exit if the assertion fails</p>
</dd></dl>

</div>
<div class="section" id="module-esg_tomcat_manager">
<span id="esg-tomcat-module"></span><h2>ESG Tomcat Module<a class="headerlink" href="#module-esg_tomcat_manager" title="Permalink to this headline">¶</a></h2>
<p>Tomcat Management Functions</p>
<dl class="function">
<dt id="esg_tomcat_manager.check_tomcat_status">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">check_tomcat_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#check_tomcat_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.check_tomcat_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Check status of tomcat server</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.check_tomcat_version">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">check_tomcat_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#check_tomcat_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.check_tomcat_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Check installed tomcat version</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.configure_tomcat">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">configure_tomcat</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#configure_tomcat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.configure_tomcat" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure tomcat for ESGF Node Manager</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.copy_config_files">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">copy_config_files</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#copy_config_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.copy_config_files" title="Permalink to this definition">¶</a></dt>
<dd><p>copy custom configuration
context.xml: increases the Tomcat cache to avoid flood of warning messages</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.copy_credential_files">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">copy_credential_files</code><span class="sig-paren">(</span><em>tomcat_install_config_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#copy_credential_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.copy_credential_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy Tomcat config files</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.create_tomcat_group">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">create_tomcat_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#create_tomcat_group"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.create_tomcat_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates Tomcat Unix group</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.create_tomcat_user">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">create_tomcat_user</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#create_tomcat_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.create_tomcat_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the Tomcat system user and user group</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.download_tomcat">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">download_tomcat</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#download_tomcat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.download_tomcat" title="Permalink to this definition">¶</a></dt>
<dd><p>Download tomcat from distribution mirror</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.extract_tomcat_tarball">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">extract_tomcat_tarball</code><span class="sig-paren">(</span><em>dest_dir='/usr/local'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#extract_tomcat_tarball"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.extract_tomcat_tarball" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract tomcat tarball that was downloaded from the distribution mirror</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.main">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Main function</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.migrate_tomcat_credentials_to_esgf">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">migrate_tomcat_credentials_to_esgf</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#migrate_tomcat_credentials_to_esgf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.migrate_tomcat_credentials_to_esgf" title="Permalink to this definition">¶</a></dt>
<dd><p>Move selected config files into esgf tomcat’s config dir (certificate et al)
Ex: /esg/config/tomcat
-rw-r–r– 1 tomcat tomcat 181779 Apr 22 19:44 esg-truststore.ts
-r——– 1 tomcat tomcat    887 Apr 22 19:32 hostkey.pem
-rw-r–r– 1 tomcat tomcat   1276 Apr 22 19:32 keystore-tomcat
-rw-r–r– 1 tomcat tomcat    590 Apr 22 19:32 pcmdi11.llnl.gov-esg-node.csr
-rw-r–r– 1 tomcat tomcat    733 Apr 22 19:32 pcmdi11.llnl.gov-esg-node.pem
-rw-r–r– 1 tomcat tomcat    295 Apr 22 19:42 tomcat-users.xml
Only called when migration conditions are present.</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.remove_default_error_page">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">remove_default_error_page</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#remove_default_error_page"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.remove_default_error_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the default Tomcat error page.
From <a class="reference external" href="https://www.owasp.org/index.php/Securing_tomcat">https://www.owasp.org/index.php/Securing_tomcat</a>:
The default error page shows a full stacktrace which is a disclosure of sensitive information. Place the following within the web-app tag (after the welcome-file-list tag is fine). The following solution is not ideal as it produces a blank page because Tomcat cannot find the file specified, but without a better solution this, at least, achieves the desired result. A well configured web application will override this default in CATALINA_HOME/webapps/APP_NAME/WEB-INF/web.xml so it won’t cause problems.</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.remove_example_webapps">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">remove_example_webapps</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#remove_example_webapps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.remove_example_webapps" title="Permalink to this definition">¶</a></dt>
<dd><p>remove Tomcat example applications</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.restart_tomcat">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">restart_tomcat</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#restart_tomcat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.restart_tomcat" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart tomcat server</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.run_tomcat_config_test">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">run_tomcat_config_test</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#run_tomcat_config_test"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.run_tomcat_config_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Run tomcat config test</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.setup_tomcat_logrotate">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">setup_tomcat_logrotate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#setup_tomcat_logrotate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.setup_tomcat_logrotate" title="Permalink to this definition">¶</a></dt>
<dd><p>If there is no logrotate file ${tomcat_logrotate_file} then create one
default is to cut files after 512M up to 20 times (10G of logs)
No file older than year should be kept.</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.start_tomcat">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">start_tomcat</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#start_tomcat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.start_tomcat" title="Permalink to this definition">¶</a></dt>
<dd><p>Start tomcat server</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.stop_tomcat">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">stop_tomcat</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#stop_tomcat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.stop_tomcat" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop tomcat server</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.write_tomcat_env">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">write_tomcat_env</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#write_tomcat_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.write_tomcat_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Write tomcat environment info to /etc/esg.env</p>
</dd></dl>

<dl class="function">
<dt id="esg_tomcat_manager.write_tomcat_install_log">
<code class="descclassname">esg_tomcat_manager.</code><code class="descname">write_tomcat_install_log</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_tomcat_manager.html#write_tomcat_install_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_tomcat_manager.write_tomcat_install_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Write tomcat version to install manifest</p>
</dd></dl>

</div>
</div>
<div class="section" id="data-node-components">
<h1>Data Node Components<a class="headerlink" href="#data-node-components" title="Permalink to this headline">¶</a></h1>
<div class="section" id="esg-publisher-module">
<h2>ESG Publisher Module<a class="headerlink" href="#esg-publisher-module" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-esg_publisher"></span><p>ESGCET Package (Publisher) functions</p>
<dl class="function">
<dt id="esg_publisher.check_publisher_version">
<code class="descclassname">esg_publisher.</code><code class="descname">check_publisher_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_publisher.html#check_publisher_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_publisher.check_publisher_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if an existing version of the Publisher is found on the system</p>
</dd></dl>

<dl class="function">
<dt id="esg_publisher.edit_esg_ini">
<code class="descclassname">esg_publisher.</code><code class="descname">edit_esg_ini</code><span class="sig-paren">(</span><em>node_short_name='test_node'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_publisher.html#edit_esg_ini"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_publisher.edit_esg_ini" title="Permalink to this definition">¶</a></dt>
<dd><p>Edit placeholder values in the generated esg.ini file</p>
</dd></dl>

<dl class="function">
<dt id="esg_publisher.esgcet_startup_hook">
<code class="descclassname">esg_publisher.</code><code class="descname">esgcet_startup_hook</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_publisher.html#esgcet_startup_hook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_publisher.esgcet_startup_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares the Publisher for startup</p>
</dd></dl>

<dl class="function">
<dt id="esg_publisher.generate_esgsetup_options">
<code class="descclassname">esg_publisher.</code><code class="descname">generate_esgsetup_options</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_publisher.html#generate_esgsetup_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_publisher.generate_esgsetup_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the string that will pass arguments to esgsetup to initialize the database</p>
</dd></dl>

<dl class="function">
<dt id="esg_publisher.main">
<code class="descclassname">esg_publisher.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_publisher.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_publisher.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Main function</p>
</dd></dl>

<dl class="function">
<dt id="esg_publisher.run_esginitialize">
<code class="descclassname">esg_publisher.</code><code class="descname">run_esginitialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_publisher.html#run_esginitialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_publisher.run_esginitialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the esginitialize script to initialize the ESG node database.</p>
</dd></dl>

<dl class="function">
<dt id="esg_publisher.run_esgsetup">
<code class="descclassname">esg_publisher.</code><code class="descname">run_esgsetup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_publisher.html#run_esgsetup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_publisher.run_esgsetup" title="Permalink to this definition">¶</a></dt>
<dd><p>generate esg.ini file using esgsetup script; #Makes call to esgsetup - &gt; Setup the ESG publication configuration</p>
</dd></dl>

<dl class="function">
<dt id="esg_publisher.setup_publisher">
<code class="descclassname">esg_publisher.</code><code class="descname">setup_publisher</code><span class="sig-paren">(</span><em>tag='v3.5.0'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_publisher.html#setup_publisher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_publisher.setup_publisher" title="Permalink to this definition">¶</a></dt>
<dd><p>Install ESGF publisher</p>
</dd></dl>

<dl class="function">
<dt id="esg_publisher.write_esgcet_env">
<code class="descclassname">esg_publisher.</code><code class="descname">write_esgcet_env</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_publisher.html#write_esgcet_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_publisher.write_esgcet_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Write Publisher environment properties to /etc/esg.env</p>
</dd></dl>

<dl class="function">
<dt id="esg_publisher.write_esgcet_install_log">
<code class="descclassname">esg_publisher.</code><code class="descname">write_esgcet_install_log</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_publisher.html#write_esgcet_install_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_publisher.write_esgcet_install_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the Publisher install properties to the install manifest</p>
</dd></dl>

</div>
<div class="section" id="module-orp">
<span id="esg-orp-module"></span><h2>ESG ORP Module<a class="headerlink" href="#module-orp" title="Permalink to this headline">¶</a></h2>
<p>Module to install the OpenID Relying Party</p>
<dl class="function">
<dt id="orp.backup_orp">
<code class="descclassname">orp.</code><code class="descname">backup_orp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/orp.html#backup_orp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orp.backup_orp" title="Permalink to this definition">¶</a></dt>
<dd><p>Backup existing ORP installation</p>
</dd></dl>

<dl class="function">
<dt id="orp.backup_orp_properties">
<code class="descclassname">orp.</code><code class="descname">backup_orp_properties</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/orp.html#backup_orp_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orp.backup_orp_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Backup orp properties file</p>
</dd></dl>

<dl class="function">
<dt id="orp.download_orp_war">
<code class="descclassname">orp.</code><code class="descname">download_orp_war</code><span class="sig-paren">(</span><em>orp_url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/orp.html#download_orp_war"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orp.download_orp_war" title="Permalink to this definition">¶</a></dt>
<dd><p>Download ORP war file from orp_url</p>
</dd></dl>

<dl class="function">
<dt id="orp.extract_orp_war">
<code class="descclassname">orp.</code><code class="descname">extract_orp_war</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/orp.html#extract_orp_war"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orp.extract_orp_war" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract orp war file</p>
</dd></dl>

<dl class="function">
<dt id="orp.get_orp_support_libs">
<code class="descclassname">orp.</code><code class="descname">get_orp_support_libs</code><span class="sig-paren">(</span><em>dest_dir</em>, <em>esg_dist_url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/orp.html#get_orp_support_libs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orp.get_orp_support_libs" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the destination directory you wish to have supported libs checked and downloaded to
returns the number of files downloaded (in this case max of 2)</p>
<blockquote>
<div>0 if there was no update of libs necessary</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="orp.main">
<code class="descclassname">orp.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/orp.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orp.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Main function</p>
</dd></dl>

<dl class="function">
<dt id="orp.orp_startup_hook">
<code class="descclassname">orp.</code><code class="descname">orp_startup_hook</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/orp.html#orp_startup_hook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orp.orp_startup_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called by esg-node before starting tomcat!
This is how we make sure we are always using the proper credentials.</p>
</dd></dl>

<dl class="function">
<dt id="orp.setup_orp">
<code class="descclassname">orp.</code><code class="descname">setup_orp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/orp.html#setup_orp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orp.setup_orp" title="Permalink to this definition">¶</a></dt>
<dd><p>Install ORP</p>
</dd></dl>

<dl class="function">
<dt id="orp.setup_providers_dropdown">
<code class="descclassname">orp.</code><code class="descname">setup_providers_dropdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/orp.html#setup_providers_dropdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orp.setup_providers_dropdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Do additional setup to configure CEDA-provided ORP with a dropdown list of IDPs</p>
</dd></dl>

<dl class="function">
<dt id="orp.update_common_loader">
<code class="descclassname">orp.</code><code class="descname">update_common_loader</code><span class="sig-paren">(</span><em>config_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/orp.html#update_common_loader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orp.update_common_loader" title="Permalink to this definition">¶</a></dt>
<dd><p>add /esg/config/ to common.loader in catalina.properties if not already present</p>
</dd></dl>

<dl class="function">
<dt id="orp.update_existing_orp">
<code class="descclassname">orp.</code><code class="descname">update_existing_orp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/orp.html#update_existing_orp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orp.update_existing_orp" title="Permalink to this definition">¶</a></dt>
<dd><p>Update an existing ORP installation</p>
</dd></dl>

<dl class="function">
<dt id="orp.write_orp_install_log">
<code class="descclassname">orp.</code><code class="descname">write_orp_install_log</code><span class="sig-paren">(</span><em>orp_service_app_home</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/orp.html#write_orp_install_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orp.write_orp_install_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Write ORP properties to install manifest and properties file</p>
</dd></dl>

</div>
<div class="section" id="module-thredds">
<span id="esg-thredds-module"></span><h2>ESG Thredds Module<a class="headerlink" href="#module-thredds" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="thredds.add_tomcat_user">
<code class="descclassname">thredds.</code><code class="descname">add_tomcat_user</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#add_tomcat_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.add_tomcat_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a user to the default Tomcat user database (tomcat-users.xml) for container-managed authentication</p>
</dd></dl>

<dl class="function">
<dt id="thredds.check_thredds_version">
<code class="descclassname">thredds.</code><code class="descname">check_thredds_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#check_thredds_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.check_thredds_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the MANIFEST.MF file for the Thredds version</p>
</dd></dl>

<dl class="function">
<dt id="thredds.copy_jar_files">
<code class="descclassname">thredds.</code><code class="descname">copy_jar_files</code><span class="sig-paren">(</span><em>esg_dist_url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#copy_jar_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.copy_jar_files" title="Permalink to this definition">¶</a></dt>
<dd><p>TDS jars necessary to support ESGF security filters
some jars are retrieved from the ESGF repository
other jars are copied from the unpacked ORP or NM distributions</p>
</dd></dl>

<dl class="function">
<dt id="thredds.copy_public_directory">
<code class="descclassname">thredds.</code><code class="descname">copy_public_directory</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#copy_public_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.copy_public_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>HACK ALERT!! For some reason the public directory does not respect thredds’ tds.context.root.path property…
So have to manually move over this directory to avert server not starting! -gavin</p>
</dd></dl>

<dl class="function">
<dt id="thredds.copy_xml_files">
<code class="descclassname">thredds.</code><code class="descname">copy_xml_files</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#copy_xml_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.copy_xml_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy Thredds configuration xmls files into proper location on server</p>
</dd></dl>

<dl class="function">
<dt id="thredds.create_password_hash">
<code class="descclassname">thredds.</code><code class="descname">create_password_hash</code><span class="sig-paren">(</span><em>tomcat_user_password</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#create_password_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.create_password_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a hash for a Tomcat user’s password using Tomcat’s digest.sh script</p>
</dd></dl>

<dl class="function">
<dt id="thredds.download_thredds_war">
<code class="descclassname">thredds.</code><code class="descname">download_thredds_war</code><span class="sig-paren">(</span><em>thredds_url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#download_thredds_war"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.download_thredds_war" title="Permalink to this definition">¶</a></dt>
<dd><p>Download thredds war file from thredds_url</p>
</dd></dl>

<dl class="function">
<dt id="thredds.esgsetup_thredds">
<code class="descclassname">thredds.</code><code class="descname">esgsetup_thredds</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#esgsetup_thredds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.esgsetup_thredds" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures Thredds with esgsetup</p>
</dd></dl>

<dl class="function">
<dt id="thredds.main">
<code class="descclassname">thredds.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Main function</p>
</dd></dl>

<dl class="function">
<dt id="thredds.select_idp_peer">
<code class="descclassname">thredds.</code><code class="descname">select_idp_peer</code><span class="sig-paren">(</span><em>esgf_idp_peer=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#select_idp_peer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.select_idp_peer" title="Permalink to this definition">¶</a></dt>
<dd><p>called during setup_tds or directly by –set-idp-peer | –set-admin-peer flags</p>
</dd></dl>

<dl class="function">
<dt id="thredds.setup_thredds">
<code class="descclassname">thredds.</code><code class="descname">setup_thredds</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#setup_thredds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.setup_thredds" title="Permalink to this definition">¶</a></dt>
<dd><p>Install Thredds</p>
</dd></dl>

<dl class="function">
<dt id="thredds.tds_startup_hook">
<code class="descclassname">thredds.</code><code class="descname">tds_startup_hook</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#tds_startup_hook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.tds_startup_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares thredds to start</p>
</dd></dl>

<dl class="function">
<dt id="thredds.update_mail_admin_address">
<code class="descclassname">thredds.</code><code class="descname">update_mail_admin_address</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#update_mail_admin_address"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.update_mail_admin_address" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates mail_admin_address in threddsConfig.xml</p>
</dd></dl>

<dl class="function">
<dt id="thredds.update_tomcat_users_file">
<code class="descclassname">thredds.</code><code class="descname">update_tomcat_users_file</code><span class="sig-paren">(</span><em>tomcat_username</em>, <em>password_hash</em>, <em>tomcat_users_file='/esg/config/tomcat/tomcat-users.xml'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#update_tomcat_users_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.update_tomcat_users_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a new user to the tomcat-users.xml file</p>
</dd></dl>

<dl class="function">
<dt id="thredds.verify_thredds_credentials">
<code class="descclassname">thredds.</code><code class="descname">verify_thredds_credentials</code><span class="sig-paren">(</span><em>thredds_ini_file='/esg/config/esgcet/esg.ini'</em>, <em>tomcat_users_file='/esg/config/tomcat/tomcat-users.xml'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#verify_thredds_credentials"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.verify_thredds_credentials" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies that Thredds credentials in /esg/config/esgcet/esg.ini matches /esg/config/tomcat/tomcat-users.xml</p>
</dd></dl>

<dl class="function">
<dt id="thredds.write_tds_env">
<code class="descclassname">thredds.</code><code class="descname">write_tds_env</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#write_tds_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.write_tds_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Write thredds info to /etc/esg.env</p>
</dd></dl>

<dl class="function">
<dt id="thredds.write_tds_install_log">
<code class="descclassname">thredds.</code><code class="descname">write_tds_install_log</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/thredds.html#write_tds_install_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thredds.write_tds_install_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Write thredds info to install manifest</p>
</dd></dl>

</div>
<div class="section" id="module-esg_cert_manager">
<span id="esg-cert-manager"></span><h2>ESG Cert Manager<a class="headerlink" href="#module-esg_cert_manager" title="Permalink to this headline">¶</a></h2>
<p>Certificate Management Functions</p>
<dl class="function">
<dt id="esg_cert_manager.backup_existing_certs">
<code class="descclassname">esg_cert_manager.</code><code class="descname">backup_existing_certs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cert_manager.html#backup_existing_certs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cert_manager.backup_existing_certs" title="Permalink to this definition">¶</a></dt>
<dd><p>Backup existing SSL certs on system</p>
</dd></dl>

<dl class="function">
<dt id="esg_cert_manager.check_cert_expiry">
<code class="descclassname">esg_cert_manager.</code><code class="descname">check_cert_expiry</code><span class="sig-paren">(</span><em>cert_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cert_manager.html#check_cert_expiry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cert_manager.check_cert_expiry" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a certificate is valid or has expired</p>
</dd></dl>

<dl class="function">
<dt id="esg_cert_manager.check_certificates">
<code class="descclassname">esg_cert_manager.</code><code class="descname">check_certificates</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cert_manager.html#check_certificates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cert_manager.check_certificates" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the validity of the ESGF and Globus certificates</p>
</dd></dl>

<dl class="function">
<dt id="esg_cert_manager.check_for_commercial_ca">
<code class="descclassname">esg_cert_manager.</code><code class="descname">check_for_commercial_ca</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cert_manager.html#check_for_commercial_ca"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cert_manager.check_for_commercial_ca" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if Commerical CA directory has been created; asks user if they would like proceed with
Commercial CA installation if directory is found</p>
</dd></dl>

<dl class="function">
<dt id="esg_cert_manager.create_cert_request">
<code class="descclassname">esg_cert_manager.</code><code class="descname">create_cert_request</code><span class="sig-paren">(</span><em>pkey</em>, <em>digest='sha256'</em>, <em>**name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cert_manager.html#create_cert_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cert_manager.create_cert_request" title="Permalink to this definition">¶</a></dt>
<dd><p>source: <a class="reference external" href="https://github.com/pyca/pyopenssl/blob/master/examples/certgen.py">https://github.com/pyca/pyopenssl/blob/master/examples/certgen.py</a></p>
</dd></dl>

<dl class="function">
<dt id="esg_cert_manager.create_certificate">
<code class="descclassname">esg_cert_manager.</code><code class="descname">create_certificate</code><span class="sig-paren">(</span><em>req</em>, <em>issuer_cert_key</em>, <em>serial</em>, <em>validity_period</em>, <em>digest='sha256'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cert_manager.html#create_certificate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cert_manager.create_certificate" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a certificate given a certificate request.
Arguments: req        - Certificate request to use</p>
<blockquote>
<div><p>issuer_cert - The certificate of the issuer
issuer_key  - The private key of the issuer
serial     - Serial number for the certificate
not_before  - Timestamp (relative to now) when the certificate</p>
<blockquote>
<div>starts being valid</div></blockquote>
<dl class="docutils">
<dt>not_after   - Timestamp (relative to now) when the certificate</dt>
<dd>stops being valid</dd>
</dl>
<p>digest     - Digest method to use for signing, default is sha256</p>
</div></blockquote>
<p>Returns:   The signed certificate in an X509 object</p>
</dd></dl>

<dl class="function">
<dt id="esg_cert_manager.create_key_pair">
<code class="descclassname">esg_cert_manager.</code><code class="descname">create_key_pair</code><span class="sig-paren">(</span><em>key_type</em>, <em>bits=4096</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cert_manager.html#create_key_pair"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cert_manager.create_key_pair" title="Permalink to this definition">¶</a></dt>
<dd><p>source: <a class="reference external" href="https://github.com/pyca/pyopenssl/blob/master/examples/certgen.py">https://github.com/pyca/pyopenssl/blob/master/examples/certgen.py</a></p>
</dd></dl>

<dl class="function">
<dt id="esg_cert_manager.extract_keystore_dn">
<code class="descclassname">esg_cert_manager.</code><code class="descname">extract_keystore_dn</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cert_manager.html#extract_keystore_dn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cert_manager.extract_keystore_dn" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the distinguished name from the Java keystore</p>
</dd></dl>

<dl class="function">
<dt id="esg_cert_manager.extract_openssl_dn">
<code class="descclassname">esg_cert_manager.</code><code class="descname">extract_openssl_dn</code><span class="sig-paren">(</span><em>public_cert='/etc/grid-security/hostcert.pem'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cert_manager.html#extract_openssl_dn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cert_manager.extract_openssl_dn" title="Permalink to this definition">¶</a></dt>
<dd><p>Regex’s the output from openssl’s x509 output in “openssl” format:
Subject: O=Grid, OU=GlobusTest, OU=simpleCA-pcmdi3.llnl.gov, CN=pcmdi7.llnl.gov
and transforms it to our “standard” format
/O=Grid/OU=GlobusTest/OU=simpleCA-pcmdi3.llnl.gov/CN=pcmdi7.llnl.gov
arg 1 -&gt; the location of the x509 pem file</p>
</dd></dl>

<dl class="function">
<dt id="esg_cert_manager.generate_esgf_csrs">
<code class="descclassname">esg_cert_manager.</code><code class="descname">generate_esgf_csrs</code><span class="sig-paren">(</span><em>node_type_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cert_manager.html#generate_esgf_csrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cert_manager.generate_esgf_csrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a CSR to be signed by a ESGF CA</p>
</dd></dl>

<dl class="function">
<dt id="esg_cert_manager.generate_esgf_csrs_ext">
<code class="descclassname">esg_cert_manager.</code><code class="descname">generate_esgf_csrs_ext</code><span class="sig-paren">(</span><em>node_type</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cert_manager.html#generate_esgf_csrs_ext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cert_manager.generate_esgf_csrs_ext" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a CSR to be signed by a ESGF CA</p>
</dd></dl>

<dl class="function">
<dt id="esg_cert_manager.generate_ssl_key_and_csr">
<code class="descclassname">esg_cert_manager.</code><code class="descname">generate_ssl_key_and_csr</code><span class="sig-paren">(</span><em>private_key='/usr/local/tomcat/hostkey.pem'</em>, <em>public_cert_req=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cert_manager.html#generate_ssl_key_and_csr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cert_manager.generate_ssl_key_and_csr" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a SSL keypair and CSR</p>
</dd></dl>

<dl class="function">
<dt id="esg_cert_manager.install_local_certs">
<code class="descclassname">esg_cert_manager.</code><code class="descname">install_local_certs</code><span class="sig-paren">(</span><em>node_type_list</em>, <em>firstrun=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cert_manager.html#install_local_certs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cert_manager.install_local_certs" title="Permalink to this definition">¶</a></dt>
<dd><p>Installs local certs to /var/lib/globus-connect-server/myproxy-ca and /etc/grid-security</p>
</dd></dl>

<dl class="function">
<dt id="esg_cert_manager.set_commercial_ca_paths">
<code class="descclassname">esg_cert_manager.</code><code class="descname">set_commercial_ca_paths</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cert_manager.html#set_commercial_ca_paths"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cert_manager.set_commercial_ca_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Set locations of the commercial CA key and cert</p>
</dd></dl>

</div>
<div class="section" id="module-esg_functions">
<span id="esg-functions"></span><h2>ESG Functions<a class="headerlink" href="#module-esg_functions" title="Permalink to this headline">¶</a></h2>
<p>esg-functions: ESGF Node Application Stack Functions
description: Installer Functions for the ESGF Node application stack</p>
<dl class="function">
<dt id="esg_functions.add_unix_group">
<code class="descclassname">esg_functions.</code><code class="descname">add_unix_group</code><span class="sig-paren">(</span><em>group_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#add_unix_group"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.add_unix_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a Unix group</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.add_unix_user">
<code class="descclassname">esg_functions.</code><code class="descname">add_unix_user</code><span class="sig-paren">(</span><em>user_add_options</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#add_unix_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.add_unix_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Use subprocess to add Unix user</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.backup">
<code class="descclassname">esg_functions.</code><code class="descname">backup</code><span class="sig-paren">(</span><em>path</em>, <em>backup_dir='/esg/backups'</em>, <em>num_of_backups=7</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#backup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.backup" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a directory the contents of the directory is backed up as a tar.gz file in
path - a filesystem path
backup_dir - destination directory for putting backup archive (default esg_backup_dir:-/esg/backups)
num_of_backups - the number of backup files you wish to have present in destination directory (default num_backups_to_keep:-7)</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.bump_git_tag">
<code class="descclassname">esg_functions.</code><code class="descname">bump_git_tag</code><span class="sig-paren">(</span><em>bump_level='patch'</em>, <em>commit_message=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#bump_git_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.bump_git_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Update git tag version</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.call_binary">
<code class="descclassname">esg_functions.</code><code class="descname">call_binary</code><span class="sig-paren">(</span><em>binary_name</em>, <em>arguments=None</em>, <em>silent=False</em>, <em>conda_env=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#call_binary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.call_binary" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses plumbum to make a call to a CLI binary.  The arguments should be passed as a list of strings</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.call_subprocess">
<code class="descclassname">esg_functions.</code><code class="descname">call_subprocess</code><span class="sig-paren">(</span><em>command_string</em>, <em>command_stdin=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#call_subprocess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.call_subprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Mimics subprocess.call; Need this on CentOS 6 because system Python is 2.6, which doesn’t have subprocess.call()</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.change_ownership_recursive">
<code class="descclassname">esg_functions.</code><code class="descname">change_ownership_recursive</code><span class="sig-paren">(</span><em>directory_path</em>, <em>uid=-1</em>, <em>gid=-1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#change_ownership_recursive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.change_ownership_recursive" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively changes ownership on a directory and its subdirectories; Mimics chown -R</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.change_permissions_recursive">
<code class="descclassname">esg_functions.</code><code class="descname">change_permissions_recursive</code><span class="sig-paren">(</span><em>path</em>, <em>mode</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#change_permissions_recursive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.change_permissions_recursive" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively changes permissions on a directory and its subdirectories; Mimics chmod -R</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.check_for_update">
<code class="descclassname">esg_functions.</code><code class="descname">check_for_update</code><span class="sig-paren">(</span><em>filename_1</em>, <em>filename_2=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#check_for_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.check_for_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Does an md5 check between local and remote resource
returns 0 (success) iff there is no match and thus indicating that
an update is available.
USAGE: checked_for_update [file] <a class="reference external" href="http://www.foo.com/file">http://www.foo.com/file</a></p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.check_shmmax">
<code class="descclassname">esg_functions.</code><code class="descname">check_shmmax</code><span class="sig-paren">(</span><em>min_shmmax=48</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#check_shmmax"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.check_shmmax" title="Permalink to this definition">¶</a></dt>
<dd><p>NOTE: This is another <strong>RedHat/CentOS</strong> specialty thing (sort of)
arg1 - min value of shmmax in MB (see: /etc/sysctl.conf)</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.confirm_password">
<code class="descclassname">esg_functions.</code><code class="descname">confirm_password</code><span class="sig-paren">(</span><em>password_input</em>, <em>password_confirmation</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#confirm_password"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.confirm_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to confirm that passwords match.
Returns true if passwords match</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.convert_hash_to_hex">
<code class="descclassname">esg_functions.</code><code class="descname">convert_hash_to_hex</code><span class="sig-paren">(</span><em>subject_name_hash</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#convert_hash_to_hex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.convert_hash_to_hex" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the subject_name_hash from a long to a hex string</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.create_backup_file">
<code class="descclassname">esg_functions.</code><code class="descname">create_backup_file</code><span class="sig-paren">(</span><em>file_name</em>, <em>backup_extension='.bak'</em>, <em>date='2018-11-29'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#create_backup_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.create_backup_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a backup of a file using the given backup extension</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.download_update">
<code class="descclassname">esg_functions.</code><code class="descname">download_update</code><span class="sig-paren">(</span><em>local_file</em>, <em>remote_file=None</em>, <em>force_download=False</em>, <em>make_backup_file=False</em>, <em>use_local_files=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#download_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.download_update" title="Permalink to this definition">¶</a></dt>
<dd><p>If an update is available then pull it down… then check the md5 sums again!</p>
<p>Yes, this results in 3 network calls to pull down a file, but it
saves total bandwidth and it also allows the updating from the
network process to be cronttab-able while parsimonious with
resources.  It is also very good practice to make sure that code
being executed is the RIGHT code!</p>
<p>The 3rd token is the “force” flag value 1|0.
1 = do not check for update, directly go and fetch the file regardless
0 = first check for update availability. (default)</p>
<p>The 4th token is for indicated whether a backup file should be made flag value 1|0.
1 = yes, create a .bak file if the file is already there before fetching new
0 = no, do NOT make a .bak file even if the file is already there, overwrite it</p>
<p>(When using the force flag you MUST specify the first two args!!)</p>
<dl class="docutils">
<dt>NOTE: Has multiple return values test for (( $? &gt; 1 )) when looking or errors</dt>
<dd>A return value of 1 only means that the file is up-to-date and there
Is no reason to fetch it.</dd>
</dl>
<p>USAGE: checked_get [file] <a class="reference external" href="http://www.foo.com/file">http://www.foo.com/file</a> [&lt;1|0&gt;] [&lt;1|0&gt;]</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.esgf_node_info">
<code class="descclassname">esg_functions.</code><code class="descname">esgf_node_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#esgf_node_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.esgf_node_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Print basic info about ESGF installation</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.extract_tarball">
<code class="descclassname">esg_functions.</code><code class="descname">extract_tarball</code><span class="sig-paren">(</span><em>tarball_name</em>, <em>dest_dir='.'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#extract_tarball"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.extract_tarball" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a tarball to the given dest_dir</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.fetch_remote_file">
<code class="descclassname">esg_functions.</code><code class="descname">fetch_remote_file</code><span class="sig-paren">(</span><em>local_file</em>, <em>remote_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#fetch_remote_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.fetch_remote_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a remote file from a distribution mirror and write its contents to the local_file</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_dir_owner_and_group">
<code class="descclassname">esg_functions.</code><code class="descname">get_dir_owner_and_group</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_dir_owner_and_group"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_dir_owner_and_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple containing the owner and group of the given directory path</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_esgf_host">
<code class="descclassname">esg_functions.</code><code class="descname">get_esgf_host</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_esgf_host"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_esgf_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the esgf host name from the file; if not in file, return the fully qualified domain name (FQDN)</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_group_id">
<code class="descclassname">esg_functions.</code><code class="descname">get_group_id</code><span class="sig-paren">(</span><em>group_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_group_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_group_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the id of the Unix group</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_group_list">
<code class="descclassname">esg_functions.</code><code class="descname">get_group_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_group_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_group_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of the Unix groups on the system</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_java_keystore_password">
<code class="descclassname">esg_functions.</code><code class="descname">get_java_keystore_password</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_java_keystore_password"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_java_keystore_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the keystore_password from the saved ks_secret_file at /esg/config/.esg_keystore_pass</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_md5sum">
<code class="descclassname">esg_functions.</code><code class="descname">get_md5sum</code><span class="sig-paren">(</span><em>file_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_md5sum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_md5sum" title="Permalink to this definition">¶</a></dt>
<dd><p>#Utility function, wraps md5sum so it may be used on either mac or
#linux machines</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_md5sum_password">
<code class="descclassname">esg_functions.</code><code class="descname">get_md5sum_password</code><span class="sig-paren">(</span><em>password</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_md5sum_password"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_md5sum_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Hash a password to get it’s md5 value</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_node_type">
<code class="descclassname">esg_functions.</code><code class="descname">get_node_type</code><span class="sig-paren">(</span><em>config_file='/esg/config/config_type'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_node_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_node_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method for reading the last state of node type config from config dir file “config_type”
Every successful, explicit call to –type|-t gets recorded in the “config_type” file
If the configuration type is not explicity set the value is read from this file.</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_parent_directory">
<code class="descclassname">esg_functions.</code><code class="descname">get_parent_directory</code><span class="sig-paren">(</span><em>directory_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_parent_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_parent_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the parent directory of directory_path</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_postgres_password">
<code class="descclassname">esg_functions.</code><code class="descname">get_postgres_password</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_postgres_password"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_postgres_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the Postgres superuser account password from /esg/config/.esg_pg_pass</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_publisher_password">
<code class="descclassname">esg_functions.</code><code class="descname">get_publisher_password</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_publisher_password"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_publisher_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the publisher database user’s password</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_security_admin_password">
<code class="descclassname">esg_functions.</code><code class="descname">get_security_admin_password</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_security_admin_password"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_security_admin_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the security_admin_password from the esgf_secret_file</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_tomcat_group_id">
<code class="descclassname">esg_functions.</code><code class="descname">get_tomcat_group_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_tomcat_group_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_tomcat_group_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the id of the Tomcat group</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_tomcat_user_id">
<code class="descclassname">esg_functions.</code><code class="descname">get_tomcat_user_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_tomcat_user_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_tomcat_user_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the id of the Tomcat user</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_user_id">
<code class="descclassname">esg_functions.</code><code class="descname">get_user_id</code><span class="sig-paren">(</span><em>user_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_user_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_user_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the id of the Unix user</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_user_list">
<code class="descclassname">esg_functions.</code><code class="descname">get_user_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_user_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_user_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of the Unix users on the system</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.get_version_from_install_manifest">
<code class="descclassname">esg_functions.</code><code class="descname">get_version_from_install_manifest</code><span class="sig-paren">(</span><em>component</em>, <em>manifest_file='/esg/esgf-install-manifest'</em>, <em>section_name='install_manifest'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#get_version_from_install_manifest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.get_version_from_install_manifest" title="Permalink to this definition">¶</a></dt>
<dd><p>Get component version info from install manifest</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.insert_file_at_pattern">
<code class="descclassname">esg_functions.</code><code class="descname">insert_file_at_pattern</code><span class="sig-paren">(</span><em>target_file</em>, <em>input_file</em>, <em>pattern</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#insert_file_at_pattern"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.insert_file_at_pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace a pattern inside the target file with the contents of the input file</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.is_in_git_repo">
<code class="descclassname">esg_functions.</code><code class="descname">is_in_git_repo</code><span class="sig-paren">(</span><em>file_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#is_in_git_repo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.is_in_git_repo" title="Permalink to this definition">¶</a></dt>
<dd><p>This determines if a specified file is in a git repository.
This function will resolve symlinks and check for a .git
directory in the directory of the actual file as well as its
parent to avoid attempting to call git unless absolutely needed,
so as to be able to detect some common cases on a system without
git actually installed and in the path.</p>
<p>Accepts as an argument the file to be checked</p>
<p>Returns True if the specified file is in a git repository</p>
<p>Returns False otherwise</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.is_valid_password">
<code class="descclassname">esg_functions.</code><code class="descname">is_valid_password</code><span class="sig-paren">(</span><em>password_input</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#is_valid_password"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.is_valid_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that password_input meets the valid password requirements:
an alphanumeric string greater than 6 characters long</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.main">
<code class="descclassname">esg_functions.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Main function</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.path_unique">
<code class="descclassname">esg_functions.</code><code class="descname">path_unique</code><span class="sig-paren">(</span><em>path_string='/Users/carlson60/miniconda2/envs/esgf-pub/bin:/Users/carlson60/miniconda2/envs/esgf-dev-env/bin:/Users/carlson60/miniconda2/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/Users/carlson60/miniconda2/bin'</em>, <em>path_separator=':'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#path_unique"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.path_unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a unique path string</p>
<p>The first (leftmost) instance of a path entry will be the one that
is preserved.</p>
<p>If $1 is specified, it will be taken as the string to deduplicate,
otherwise $PATH is used.</p>
<p>If $2 is specified, it will be taken as the path separator, which
otherwise defaults to ‘:’</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.pip_install">
<code class="descclassname">esg_functions.</code><code class="descname">pip_install</code><span class="sig-paren">(</span><em>pkg</em>, <em>req_file=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#pip_install"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.pip_install" title="Permalink to this definition">¶</a></dt>
<dd><p>pip installs a package to the current python environment</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.pip_install_git">
<code class="descclassname">esg_functions.</code><code class="descname">pip_install_git</code><span class="sig-paren">(</span><em>repo</em>, <em>name</em>, <em>tag=None</em>, <em>subdir=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#pip_install_git"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.pip_install_git" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a properly formatted string to pip install from a git repo</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.pip_version">
<code class="descclassname">esg_functions.</code><code class="descname">pip_version</code><span class="sig-paren">(</span><em>pkg_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#pip_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.pip_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the version of a package installed with pip, return None if not installed</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.prefix_to_path">
<code class="descclassname">esg_functions.</code><code class="descname">prefix_to_path</code><span class="sig-paren">(</span><em>path</em>, <em>prepend_value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#prefix_to_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.prefix_to_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepends path components to a variable, deduplicates the list,
then prints to stdout the export command required to prepend
that list to that variable.</p>
<p>Takes as arguments first a variable containing a colon-separated
path to prepend to, then a space-separated collection of paths to
prepend – these path components MUST NOT contain spaces.</p>
<p>If insufficient arguments are present, a warning message is
printed to stderr and nothing is printed to stdout.</p>
<dl class="docutils">
<dt>Example:</dt>
<dd><p class="first">prefix_to_path LD_LIBRARY_PATH /foo/lib /bar/lib</p>
<dl class="last docutils">
<dt>Would result in the entry:</dt>
<dd>export LD_LIBRARY_PATH=/foo/lib:/bar/lib:$LD_LIBRARY_PATH</dd>
</dl>
</dd>
<dt>NOTE: In the context of system setup this is usually</dt>
<dd>WHAT YOU WANT; that your libs are found before any user libs are</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="esg_functions.readlinkf">
<code class="descclassname">esg_functions.</code><code class="descname">readlinkf</code><span class="sig-paren">(</span><em>file_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#readlinkf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.readlinkf" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a portable implementation of GNU’s “readlink -f” in
bash/zsh, following symlinks recursively until they end in a
file, and will print the full dereferenced path of the specified
file even if the file isn’t a symlink.</p>
<p>Loop detection exists, but only as an abort after passing a
maximum length.</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.replace_string_in_file">
<code class="descclassname">esg_functions.</code><code class="descname">replace_string_in_file</code><span class="sig-paren">(</span><em>file_name</em>, <em>original_string</em>, <em>new_string</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#replace_string_in_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.replace_string_in_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Goes into a file and replaces string</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.set_java_keystore_password">
<code class="descclassname">esg_functions.</code><code class="descname">set_java_keystore_password</code><span class="sig-paren">(</span><em>keystore_password=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#set_java_keystore_password"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.set_java_keystore_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the password for a Java keystore to /esg/config/.esg_keystore_pass</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.set_postgres_password">
<code class="descclassname">esg_functions.</code><code class="descname">set_postgres_password</code><span class="sig-paren">(</span><em>password</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#set_postgres_password"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.set_postgres_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the Postgres superuser account password; gets saved to /esg/config/.esg_pg_pass</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.set_publisher_password">
<code class="descclassname">esg_functions.</code><code class="descname">set_publisher_password</code><span class="sig-paren">(</span><em>password=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#set_publisher_password"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.set_publisher_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the publisher database user’s password; saves it to pub_secret_file
If not password is provided as an argument, a prompt for a password is given.</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.set_security_admin_password">
<code class="descclassname">esg_functions.</code><code class="descname">set_security_admin_password</code><span class="sig-paren">(</span><em>updated_password</em>, <em>password_file='/esg/config/.esgf_pass'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#set_security_admin_password"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.set_security_admin_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the esgf_secret_file</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.setup_whitelist_files">
<code class="descclassname">esg_functions.</code><code class="descname">setup_whitelist_files</code><span class="sig-paren">(</span><em>whitelist_file_dir='/esg/config'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#setup_whitelist_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.setup_whitelist_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Setups up whitelist XML files from the distribution mirror
Downloads the XML files and edits the placeholder string with the esgf hostname
Formerly called setup_sensible_confs</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.stream_subprocess_output">
<code class="descclassname">esg_functions.</code><code class="descname">stream_subprocess_output</code><span class="sig-paren">(</span><em>command_string</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#stream_subprocess_output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.stream_subprocess_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Print out the stdout of the subprocess in real time</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.track_extraction_progress">
<code class="descclassname">esg_functions.</code><code class="descname">track_extraction_progress</code><span class="sig-paren">(</span><em>members</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#track_extraction_progress"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.track_extraction_progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Output of the files being extracted from a tarball</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.update_fileupload_jar">
<code class="descclassname">esg_functions.</code><code class="descname">update_fileupload_jar</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#update_fileupload_jar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.update_fileupload_jar" title="Permalink to this definition">¶</a></dt>
<dd><p>quick-fix for removing insecure commons-fileupload jar file</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.verify_checksum">
<code class="descclassname">esg_functions.</code><code class="descname">verify_checksum</code><span class="sig-paren">(</span><em>local_file</em>, <em>remote_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#verify_checksum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.verify_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify md5 checksum of file downloaded from distribution mirror</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.write_security_lib_install_log">
<code class="descclassname">esg_functions.</code><code class="descname">write_security_lib_install_log</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#write_security_lib_install_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.write_security_lib_install_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Write esgf-security library info to install manifest</p>
</dd></dl>

<dl class="function">
<dt id="esg_functions.write_to_install_manifest">
<code class="descclassname">esg_functions.</code><code class="descname">write_to_install_manifest</code><span class="sig-paren">(</span><em>component</em>, <em>install_path</em>, <em>version</em>, <em>manifest_file='/esg/esgf-install-manifest'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_functions.html#write_to_install_manifest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_functions.write_to_install_manifest" title="Permalink to this definition">¶</a></dt>
<dd><p>Write component info to install manifest</p>
</dd></dl>

</div>
<div class="section" id="module-esg_purge">
<span id="esg-purge"></span><h2>ESG Purge<a class="headerlink" href="#module-esg_purge" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="esg_purge.purge_postgres">
<code class="descclassname">esg_purge.</code><code class="descname">purge_postgres</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_purge.html#purge_postgres"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_purge.purge_postgres" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes postgres installation via yum</p>
</dd></dl>

</div>
</div>
<div class="section" id="index-node-components">
<h1>Index Node Components<a class="headerlink" href="#index-node-components" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-esg_search">
<span id="esg-search"></span><h2>ESG Search<a class="headerlink" href="#module-esg_search" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="esg_search.setup_search_service">
<code class="descclassname">esg_search.</code><code class="descname">setup_search_service</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_search.html#setup_search_service"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_search.setup_search_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Install The Search Service…
- Takes boolean arg: 0 = setup / install mode (default)</p>
<blockquote>
<div>1 = updated mode</div></blockquote>
<p>In setup mode it is an idempotent install (default)
In update mode it will always pull down latest after archiving old</p>
</dd></dl>

</div>
<div class="section" id="module-solr">
<span id="solr"></span><h2>Solr<a class="headerlink" href="#module-solr" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="solr.download_template_directory">
<code class="descclassname">solr.</code><code class="descname">download_template_directory</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/solr.html#download_template_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#solr.download_template_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>download template directory structure for shards home</p>
</dd></dl>

<dl class="function">
<dt id="solr.extract_solr_tarball">
<code class="descclassname">solr.</code><code class="descname">extract_solr_tarball</code><span class="sig-paren">(</span><em>solr_tarball_path</em>, <em>SOLR_VERSION</em>, <em>target_path='/usr/local'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/solr.html#extract_solr_tarball"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#solr.extract_solr_tarball" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the solr tarball to {target_path} and symlink it to /usr/local/solr</p>
</dd></dl>

<dl class="function">
<dt id="solr.setup_solr">
<code class="descclassname">solr.</code><code class="descname">setup_solr</code><span class="sig-paren">(</span><em>index_config=['master', 'slave'], SOLR_INSTALL_DIR='/usr/local/solr', SOLR_HOME='/usr/local/solr-home', SOLR_DATA_DIR='/esg/solr-index'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/solr.html#setup_solr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#solr.setup_solr" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup Apache Solr for faceted search</p>
</dd></dl>

<dl class="function">
<dt id="solr.solr_status">
<code class="descclassname">solr.</code><code class="descname">solr_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/solr.html#solr_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#solr.solr_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the status of solr</p>
</dd></dl>

<dl class="function">
<dt id="solr.stop_solr">
<code class="descclassname">solr.</code><code class="descname">stop_solr</code><span class="sig-paren">(</span><em>SOLR_INSTALL_DIR='/usr/local/solr'</em>, <em>port='-all'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/solr.html#stop_solr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#solr.stop_solr" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop the solr process</p>
</dd></dl>

</div>
<div class="section" id="module-esg_cog">
<span id="cog"></span><h2>CoG<a class="headerlink" href="#module-esg_cog" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="esg_cog.checkout_cog_branch">
<code class="descclassname">esg_cog.</code><code class="descname">checkout_cog_branch</code><span class="sig-paren">(</span><em>cog_path</em>, <em>branch_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cog.html#checkout_cog_branch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cog.checkout_cog_branch" title="Permalink to this definition">¶</a></dt>
<dd><p>Checkout a given branch of the COG repo</p>
</dd></dl>

<dl class="function">
<dt id="esg_cog.clone_cog_repo">
<code class="descclassname">esg_cog.</code><code class="descname">clone_cog_repo</code><span class="sig-paren">(</span><em>COG_INSTALL_DIR</em>, <em>COG_TAG='master'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_cog.html#clone_cog_repo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_cog.clone_cog_repo" title="Permalink to this definition">¶</a></dt>
<dd><p>Clone the COG repo from Github</p>
</dd></dl>

</div>
</div>
<div class="section" id="idp-node-components">
<h1>IDP Node Components<a class="headerlink" href="#idp-node-components" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-esg_security">
<span id="esg-security"></span><h2>ESG Security<a class="headerlink" href="#module-esg_security" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="esg_security.clean_security_webapp_subsystem">
<code class="descclassname">esg_security.</code><code class="descname">clean_security_webapp_subsystem</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_security.html#clean_security_webapp_subsystem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_security.clean_security_webapp_subsystem" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the deprecated esgf-security webapp if found on system</p>
</dd></dl>

<dl class="function">
<dt id="esg_security.create_policy_files">
<code class="descclassname">esg_security.</code><code class="descname">create_policy_files</code><span class="sig-paren">(</span><em>policy_type</em>, <em>security_jar_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_security.html#create_policy_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_security.create_policy_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the policy files depending on the type argument (either local or common).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>type</strong> – The type of policy file to be created. Must either be ‘local’ or ‘common’</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>TypeError</strong> – raises an exception</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="esg_security.security_startup_hook">
<code class="descclassname">esg_security.</code><code class="descname">security_startup_hook</code><span class="sig-paren">(</span><em>node_type_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_security.html#security_startup_hook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_security.security_startup_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares esgf-security to start</p>
</dd></dl>

<dl class="function">
<dt id="esg_security.setup_security">
<code class="descclassname">esg_security.</code><code class="descname">setup_security</code><span class="sig-paren">(</span><em>node_type_list</em>, <em>esg_dist_url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_security.html#setup_security"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_security.setup_security" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><dl class="first docutils">
<dt>Takes boolean arg: 0 = setup / install mode (default)</dt>
<dd>1 = updated mode</dd>
</dl>
</li>
</ul>
<p>In setup mode it is an idempotent install (default)
In update mode it will always pull down latest after archiving old</p>
</dd></dl>

<dl class="function">
<dt id="esg_security.write_security_db_install_log">
<code class="descclassname">esg_security.</code><code class="descname">write_security_db_install_log</code><span class="sig-paren">(</span><em>db_dir</em>, <em>esgf_security_version</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/esg_security.html#write_security_db_install_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#esg_security.write_security_db_install_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes esgf-security settings to install manifest</p>
</dd></dl>

</div>
<div class="section" id="module-globus">
<span id="globus"></span><h2>Globus<a class="headerlink" href="#module-globus" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="globus.check_for_existing_globus_rpm_packages">
<code class="descclassname">globus.</code><code class="descname">check_for_existing_globus_rpm_packages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/globus.html#check_for_existing_globus_rpm_packages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globus.check_for_existing_globus_rpm_packages" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if globus rpm is already installed</p>
</dd></dl>

<dl class="function">
<dt id="globus.create_globus_account">
<code class="descclassname">globus.</code><code class="descname">create_globus_account</code><span class="sig-paren">(</span><em>globus_sys_acct</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globus.html#create_globus_account"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globus.create_globus_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the system account for globus to run as.</p>
</dd></dl>

<dl class="function">
<dt id="globus.globus_check_certificates">
<code class="descclassname">globus.</code><code class="descname">globus_check_certificates</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/globus.html#globus_check_certificates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globus.globus_check_certificates" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if globus certificates are valid</p>
</dd></dl>

<dl class="function">
<dt id="globus.install_globus_rpm">
<code class="descclassname">globus.</code><code class="descname">install_globus_rpm</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/globus.html#install_globus_rpm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globus.install_globus_rpm" title="Permalink to this definition">¶</a></dt>
<dd><p>Install globus rpm repo</p>
</dd></dl>

<dl class="function">
<dt id="globus.setup_globus">
<code class="descclassname">globus.</code><code class="descname">setup_globus</code><span class="sig-paren">(</span><em>installation_type</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globus.html#setup_globus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globus.setup_globus" title="Permalink to this definition">¶</a></dt>
<dd><p>Globus Toolkit -&gt;  MyProxy (client) &amp; GridFTP (server)
Takes arg &lt;selection bit vector&gt;
The rest of the args are the following…
for data-node configuration (GridFTP stuff): [“bdm”|”end-user”] see esg-globus script
for idp configuration (MyProxy stuff): [gen-self-cert] &lt;dir&gt; | &lt;regen-simpleca&gt; [fetch-certs|gen-self-cert|keep-certs] | [“install”|”update”]</p>
</dd></dl>

<dl class="function">
<dt id="globus.setup_globus_services">
<code class="descclassname">globus.</code><code class="descname">setup_globus_services</code><span class="sig-paren">(</span><em>config_type</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globus.html#setup_globus_services"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globus.setup_globus_services" title="Permalink to this definition">¶</a></dt>
<dd><p>arg1 - config_type (“datanode” | “gateway”  [“install”|”update”])</p>
</dd></dl>

<dl class="function">
<dt id="globus.start_globus">
<code class="descclassname">globus.</code><code class="descname">start_globus</code><span class="sig-paren">(</span><em>installation_type</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globus.html#start_globus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globus.start_globus" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the globus services by delegating out to esg-globus script
arg1 selection bit vector ($sel)
args* (in the context of “data” node -&gt;  [“bdm”|”end-user”])</p>
</dd></dl>

<dl class="function">
<dt id="globus.stop_globus">
<code class="descclassname">globus.</code><code class="descname">stop_globus</code><span class="sig-paren">(</span><em>installation_type</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globus.html#stop_globus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globus.stop_globus" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops the globus services</p>
</dd></dl>

<dl class="function">
<dt id="globus.stop_globus_services">
<code class="descclassname">globus.</code><code class="descname">stop_globus_services</code><span class="sig-paren">(</span><em>config_type</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globus.html#stop_globus_services"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globus.stop_globus_services" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop globus</p>
</dd></dl>

<dl class="function">
<dt id="globus.write_globus_env">
<code class="descclassname">globus.</code><code class="descname">write_globus_env</code><span class="sig-paren">(</span><em>globus_location</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globus.html#write_globus_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globus.write_globus_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Write globus properties to /etc/esg.env</p>
</dd></dl>

</div>
<div class="section" id="module-idp">
<span id="idp"></span><h2>IDP<a class="headerlink" href="#module-idp" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="idp.main">
<code class="descclassname">idp.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/idp.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idp.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Main function</p>
</dd></dl>

<dl class="function">
<dt id="idp.setup_idp">
<code class="descclassname">idp.</code><code class="descname">setup_idp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/idp.html#setup_idp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idp.setup_idp" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup IDP service</p>
</dd></dl>

<dl class="function">
<dt id="idp.write_idp_install_log">
<code class="descclassname">idp.</code><code class="descname">write_idp_install_log</code><span class="sig-paren">(</span><em>idp_service_app_home</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/idp.html#write_idp_install_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idp.write_idp_install_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Write IDP properties to install manifest and property file</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="issues.html" class="btn btn-neutral float-right" title="ESGF Installer Issue Tracking Guidelines" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="autoinstall_usage.html" class="btn btn-neutral" title="Autoinstaller Configuration Options" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, William Hill

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>