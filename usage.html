

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ESGF Command Line Interface &mdash; esgf-installer beta documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Autoinstaller Configuration Options" href="autoinstall_usage.html" />
    <link rel="prev" title="ESGF Certificate Management" href="cert_howto.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> esgf-installer
          

          
          </a>

          
            
            
              <div class="version">
                3.0b1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert_howto.html">ESGF Certificate Management</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ESGF Command Line Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Named Arguments">Named Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-type-selection">Configuration Type Selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#federation-node-relationship-flags">Federation / Node Relationship Flags:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#security-policy">Security Policy…</a></li>
<li class="toctree-l2"><a class="reference internal" href="#index-search-utils">Index (search) Utils…</a></li>
<li class="toctree-l2"><a class="reference internal" href="#publication-endpoint-setting-index-peer">Publication Endpoint Setting (Index Peer)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#idp-endpoint-setting-idp-peer">IDP Endpoint Setting (IDP Peer)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#globus-tool-management">Globus Tool Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#key-management-flags">Key Management Flags:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#database-management">Database Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trouble-shooting">Trouble Shooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other">Other</a></li>
<li class="toctree-l2"><a class="reference internal" href="#node-life-cycle-flags">Node Life Cycle Flags:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#key-environment-vars">Key Environment Vars:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#typical-usage">Typical usage:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="autoinstall_usage.html">Autoinstaller Configuration Options</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">Base Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html#data-node-components">Data Node Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html#index-node-components">Index Node Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html#idp-node-components">IDP Node Components</a></li>
</ul>
<p class="caption"><span class="caption-text">Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="issues.html">ESGF Installer Issue Tracking Guidelines</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contribute_docs.html">Contributing to Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">esgf-installer</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>ESGF Command Line Interface</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="esgf-command-line-interface">
<h1>ESGF Command Line Interface<a class="headerlink" href="#esgf-command-line-interface" title="Permalink to this headline">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">esg_node</span><span class="o">.</span><span class="n">py</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">install</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">base</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">update</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">upgrade</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">install</span><span class="o">-</span><span class="n">local</span><span class="o">-</span><span class="n">certs</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">generate</span><span class="o">-</span><span class="n">esgf</span><span class="o">-</span><span class="n">csrs</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">generate</span><span class="o">-</span><span class="n">esgf</span><span class="o">-</span><span class="n">csrs</span><span class="o">-</span><span class="n">ext</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">cert</span><span class="o">-</span><span class="n">howto</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fix</span><span class="o">-</span><span class="n">perms</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="nb">type</span> <span class="p">{</span><span class="n">data</span><span class="p">,</span><span class="n">index</span><span class="p">,</span><span class="n">idp</span><span class="p">,</span><span class="n">compute</span><span class="p">,</span><span class="nb">all</span><span class="p">}</span> <span class="p">[{</span><span class="n">data</span><span class="p">,</span><span class="n">index</span><span class="p">,</span><span class="n">idp</span><span class="p">,</span><span class="n">compute</span><span class="p">,</span><span class="nb">all</span><span class="p">}</span> <span class="o">...</span><span class="p">]]</span>
                   <span class="p">[</span><span class="o">--</span><span class="nb">set</span><span class="o">-</span><span class="nb">type</span> <span class="n">SETTYPE</span> <span class="p">[</span><span class="n">SETTYPE</span> <span class="o">...</span><span class="p">]]</span> <span class="p">[</span><span class="o">--</span><span class="n">get</span><span class="o">-</span><span class="nb">type</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">start</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">stop</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">restart</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">status</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">update</span><span class="o">-</span><span class="n">apache</span><span class="o">-</span><span class="n">conf</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">v</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">recommended_setup</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">custom_setup</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">use</span><span class="o">-</span><span class="n">local</span><span class="o">-</span><span class="n">files</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">use</span><span class="o">-</span><span class="n">local</span><span class="o">-</span><span class="n">mirror</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">devel</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">prod</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">debug</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">clear</span><span class="o">-</span><span class="n">envfile</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">clear</span><span class="o">-</span><span class="n">my</span><span class="o">-</span><span class="n">certs</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">info</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">config</span><span class="o">-</span><span class="n">db</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">backup</span><span class="o">-</span><span class="n">db</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">restore</span><span class="o">-</span><span class="n">db</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">verify</span><span class="o">-</span><span class="n">thredds</span><span class="o">-</span><span class="n">credentials</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">uninstall</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">get</span><span class="o">-</span><span class="n">idp</span><span class="o">-</span><span class="n">peer</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="nb">set</span><span class="o">-</span><span class="n">idp</span><span class="o">-</span><span class="n">peer</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">get</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">peer</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="nb">set</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">peer</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">get</span><span class="o">-</span><span class="n">peer</span><span class="o">-</span><span class="n">group</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="nb">set</span><span class="o">-</span><span class="n">peer</span><span class="o">-</span><span class="n">group</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">auto</span><span class="o">-</span><span class="n">fetch</span><span class="o">-</span><span class="n">certs</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="nb">set</span><span class="o">-</span><span class="n">auto</span><span class="o">-</span><span class="n">fetch</span><span class="o">-</span><span class="n">certs</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">fetch</span><span class="o">-</span><span class="n">esgf</span><span class="o">-</span><span class="n">certs</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">rebuild</span><span class="o">-</span><span class="n">truststore</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">my</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">truststore</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">generate</span><span class="o">-</span><span class="n">ssl</span><span class="o">-</span><span class="n">key</span><span class="o">-</span><span class="ow">and</span><span class="o">-</span><span class="n">csr</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">migrate</span><span class="o">-</span><span class="n">tomcat</span><span class="o">-</span><span class="n">credentials</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">esgf</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">update</span><span class="o">-</span><span class="n">temp</span><span class="o">-</span><span class="n">ca</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">check</span><span class="o">-</span><span class="n">certs</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">install</span><span class="o">-</span><span class="n">ssl</span><span class="o">-</span><span class="n">keypair</span> <span class="n">INSTALLSSLKEYPAIR</span> <span class="p">[</span><span class="n">INSTALLSSLKEYPAIR</span> <span class="o">...</span><span class="p">]]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">optimize</span><span class="o">-</span><span class="n">index</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">myproxy</span><span class="o">-</span><span class="n">sanity</span><span class="o">-</span><span class="n">check</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">noglobus</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">force</span><span class="o">-</span><span class="n">install</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">index</span><span class="o">-</span><span class="n">config</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">check</span><span class="o">-</span><span class="n">shards</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">replica</span><span class="o">-</span><span class="n">shard</span> <span class="n">ADDREPLICASHARD</span> <span class="n">ADDREPLICASHARD</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">remove</span><span class="o">-</span><span class="n">replica</span><span class="o">-</span><span class="n">shard</span> <span class="n">REMOVEREPLICASHARD</span> <span class="n">REMOVEREPLICASHARD</span><span class="p">]</span>
                   <span class="p">[</span><span class="o">--</span><span class="n">update</span><span class="o">-</span><span class="n">publisher</span><span class="o">-</span><span class="n">resources</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="Named Arguments">
<h2>Named Arguments<a class="headerlink" href="#Named Arguments" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd>--install</kbd></td>
<td><p class="first">Goes through the installation process and automatically starts up node services</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--base</kbd></td>
<td><p class="first">Install on base third party components</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--update</kbd></td>
<td><p class="first">Updates the node manager</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--upgrade</kbd></td>
<td><p class="first">Upgrade the node manager</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--install-local-certs</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Install local certificates</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--generate-esgf-csrs</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Generate CSRs for a simpleCA CA certificate and/or web container certificate</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--generate-esgf-csrs-ext</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Generate CSRs for a node other than the one you are running</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--cert-howto</kbd></td>
<td><p class="first">Provides information about certificate management</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--fix-perms, --fixperms</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Fix permissions</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--type, -t, --flavor</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Possible choices: data, index, idp, compute, all</p>
<p class="last">Set type</p>
</td></tr>
<tr><td class="option-group">
<kbd>--set-type</kbd></td>
<td>Sets the type value to be used at next start up</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--get-type, --show-type</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Returns the last stored type code value of the last run node configuration (data=4 +| index=8 +| idp=16)</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--start</kbd></td>
<td><p class="first">Start the node’s services</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--stop, --shutdown</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Stops the node’s services</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--restart</kbd></td>
<td><p class="first">Restarts the node’s services (calls stop then start :-/)</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--status</kbd></td>
<td><p class="first">Status on node’s services</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--update-apache-conf</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Update Apache configuration</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>-v, --version</kbd></td>
<td><p class="first">Displays the version of this script</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--recommended_setup</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Sets esgsetup to use the recommended, minimal setup</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--custom_setup</kbd></td>
<td><p class="first">Sets esgsetup to use a custom, user-defined setup</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--use-local-files</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Sets a flag for using local files instead of attempting to fetch a remote file</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--use-local-mirror</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Sets the installer to fetch files from a mirror directory that is on the same server in which the installation is being run</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--devel</kbd></td>
<td><p class="first">Sets the installation type to the devel build</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--prod</kbd></td>
<td><p class="first">Sets the installation type to the production build</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--debug</kbd></td>
<td><p class="first">Sets the logging level to debug</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--clear-envfile</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Delete (and backup) existing envfile (/etc/esg.env)</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--clear-my-certs</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Delete certficates from $HOME/.globus/certificates</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--info</kbd></td>
<td><p class="first">Print basic info about ESGF installation</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--config-db</kbd></td>
<td><p class="first">configures the database i.e. sets up table schema based on the the node type.</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--backup-db</kbd></td>
<td><p class="first">Backs up the Postgres database</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--restore-db</kbd></td>
<td><p class="first">Restores the Postgres database from a previous backup</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--verify-thredds-credentials</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Verifies Thredds credentials</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--uninstall, --purge</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Uninstalls the ESGF installation</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd>--get-idp-peer</kbd></td>
<td><p class="first">Displays the IDP peer node name</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--set-idp-peer, --set-admin-peer</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Selects the IDP peer node</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--get-default-peer</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Displays the default peer</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--set-default-peer</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Sets the default peer</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--get-peer-group, --get-peer-groups</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Displays the peer groups</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--set-peer-group, --set-peer-groups</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Sets the peer groups</p>
<p class="last">Default: False</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--no-auto-fetch-certs</kbd></td>
</tr>
<tr><td>&#160;</td><td>Default: False</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--set-auto-fetch-certs</kbd></td>
</tr>
<tr><td>&#160;</td><td>Default: False</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--fetch-esgf-certs</kbd></td>
</tr>
<tr><td>&#160;</td><td>Default: False</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--rebuild-truststore</kbd></td>
</tr>
<tr><td>&#160;</td><td>Default: False</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--add-my-cert-to-truststore</kbd></td>
</tr>
<tr><td>&#160;</td><td>Default: False</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--generate-ssl-key-and-csr</kbd></td>
</tr>
<tr><td>&#160;</td><td>Default: False</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--migrate-tomcat-credentials-to-esgf</kbd></td>
</tr>
<tr><td>&#160;</td><td>Default: False</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--update-temp-ca</kbd></td>
</tr>
<tr><td>&#160;</td><td>Default: False</td></tr>
<tr><td class="option-group">
<kbd>--check-certs</kbd></td>
<td>Default: False</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--install-ssl-keypair, --install-keypair</kbd></td>
</tr>
<tr><td>&#160;</td><td></td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--optimize-index</kbd></td>
</tr>
<tr><td>&#160;</td><td>Default: False</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--myproxy-sanity-check</kbd></td>
</tr>
<tr><td>&#160;</td><td>Default: False</td></tr>
<tr><td class="option-group">
<kbd>--noglobus</kbd></td>
<td>Default: False</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--force-install</kbd></td>
</tr>
<tr><td>&#160;</td><td>Default: False</td></tr>
<tr><td class="option-group">
<kbd>--index-config</kbd></td>
<td>Default: False</td></tr>
<tr><td class="option-group">
<kbd>--check-shards</kbd></td>
<td>Default: False</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--add-replica-shard</kbd></td>
</tr>
<tr><td>&#160;</td><td>Specify a hostname and port of the replica shard to add</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--remove-replica-shard</kbd></td>
</tr>
<tr><td>&#160;</td><td>Specify a hostname and port of the replica shard to remove</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>--update-publisher-resources</kbd></td>
</tr>
<tr><td>&#160;</td><td>Default: False</td></tr>
</tbody>
</table>
</div>
<ul class="simple">
<li>This program must be run as root or a root equiv shell: (sudo -s)</li>
</ul>
<p>esg_node.py ([–&lt;directive&gt;] | [start] | [stop] | [status] | [restart]</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--install</span></kbd></td>
<td><ul class="first last simple">
<li>goes through the installation process; will automatically start up node services</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--verify</span></kbd></td>
<td><ul class="first last simple">
<li>runs the test code to verify installation</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--write-env</span></kbd></td>
<td><ul class="first last simple">
<li>writes the necessary env vars to /etc/esg.env</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--version</span></kbd></td>
<td><ul class="first last simple">
<li>indicates the version of this script</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--check</span></kbd></td>
<td><ul class="first last simple">
<li>checks if this script is the most up-to-date posted &lt;u|c|X&gt; (Update|Continue|eXit)</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--clear</span></kbd></td>
<td><ul class="first last simple">
<li>removes the file holding the environment state of last install</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--test-pub</span></kbd></td>
<td><ul class="first last simple">
<li>performs the publication test directly (same publication called in last step of install)</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--info</span></kbd></td>
<td><ul class="first last simple">
<li>provides a brief explanation of the DataNode</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--update</span></kbd></td>
<td><ul class="first last simple">
<li>updates the node manager</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--force</span></kbd></td>
<td><ul class="first last simple">
<li>will allow execution of installation|update code to be executed beyond the up2date checks. Basically allowing an installation|update as if starting from scratch.</li>
</ul>
</td></tr>
</tbody>
</table>
<div class="section" id="configuration-type-selection">
<h2>Configuration Type Selection<a class="headerlink" href="#configuration-type-selection" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--type</span>, <span class="option">-t <var>&lt;data &amp;| index &amp;| idp &amp;| compute&gt;</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>Select type of node: “data” node, “index” node, “idp” (identity provider) node and/or “compute” node(note: there is no default one must be selected at least initially…when in doubt use “data”)</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--set-type</span></kbd></td>
<td>&lt;data &amp;| index &amp;| idp &amp;| compute&gt;   - Sets the type value to be used at next start up</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--get-type</span></kbd></td>
<td><ul class="first last simple">
<li>returns the last stored type code value of the last run node configuration (note: (s|g)et-type flags are singular command flags, meaning they are NOT meant to work with other flags on the same command line!)</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="federation-node-relationship-flags">
<h2>Federation / Node Relationship Flags:<a class="headerlink" href="#federation-node-relationship-flags" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--set-default-peer <var>&lt;hostname of peer to be default&gt;</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>configures the default peer</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--get-default-peer</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>tells you this node’s currently configured default peer</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--set-peer-group <var>&lt;name of group(s)&gt;</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>configures the peer groups you wish to participate in</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--get-peer-group</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>tells you this node’s currenly configured peer group(s)</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--federation-sanity-check</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>tells you if your node’s configured peer groups intersect with default peer</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--spotcheck</span></kbd></td>
<td><ul class="first last simple">
<li>provides basic federation mesh (inter-connectivity) information. (see esgf-spotcheck script directly)</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="security-policy">
<h2>Security Policy…<a class="headerlink" href="#security-policy" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--policy-check <var>&lt;resource string&gt;</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>returns the list of policies that are triggered by the provided resource</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="index-search-utils">
<h2>Index (search) Utils…<a class="headerlink" href="#index-search-utils" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--optimize-index</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>[–force] optimizes search index for “index” nodes (must be called local to index node)</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--crawl</span></kbd></td>
<td><ul class="first last simple">
<li>ingest remote catalogs and their descendants into local index for searching.</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--add-replica-shard</span></kbd></td>
</tr>
<tr><td>&#160;</td><td>&lt;host&gt;             - [:&lt;port&gt;] creates a local replica index of the index at the given &lt;host&gt; mapping to local &lt;port&gt;</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--remove-replica-shard <var>&lt;host&gt;</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>[:&lt;port&gt;] removes the local replica index bound to &lt;port&gt; named by &lt;host&gt;</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--list-shards</span></kbd></td>
<td><ul class="first last simple">
<li>shows list of registered local replica indexes</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--init-shards</span></kbd></td>
<td><ul class="first last simple">
<li>adds all shards listed in the replica shard configuration file</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--check-shards</span></kbd></td>
<td><ul class="first last simple">
<li>checks the configuration for local replica indexes</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--time-shards</span></kbd></td>
<td><ul class="first last simple">
<li>cycles through all known index shards providing query times for each [-show-local] will show timing information for locally replicated shards [-timeout &lt;seconds&gt;] will set the connection timeout value (in seconds)</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--update-publisher-resources</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>update local repository of publication schemas et al.</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="publication-endpoint-setting-index-peer">
<h2>Publication Endpoint Setting (Index Peer)<a class="headerlink" href="#publication-endpoint-setting-index-peer" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--set-index-peer <var>&lt;hostname of the index peer you wish to publish to&gt;</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>set index peer Ex: pcmdi.llnl.gov</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--get-index-peer</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>tells you where this node is indexing it’s data</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="idp-endpoint-setting-idp-peer">
<h2>IDP Endpoint Setting (IDP Peer)<a class="headerlink" href="#idp-endpoint-setting-idp-peer" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--set-idp-peer</span>, <span class="option">--set-admin-peer</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>make selection from menu or input information for idp peer you wish to present credentials to</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--get-idp-peer</span></kbd></td>
<td><ul class="first last simple">
<li>tells you where this node is authenticating against.</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="globus-tool-management">
<h2>Globus Tool Management<a class="headerlink" href="#globus-tool-management" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--no-globus</span></kbd></td>
<td><ul class="first last simple">
<li>will not perform any operations affecting globus tools (for those with existing globus setups)</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--gridftp-config</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>[ bdm &amp;| end-user ] (defaults to both)</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--myproxy</span></kbd></td>
<td><ul class="first last simple">
<li>[gen-self-cert] &lt;dir&gt; | [regen-simpleca] [fetch-certs|gen-self-cert|keep-certs] | [install|update]</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="key-management-flags">
<h2>Key Management Flags:<a class="headerlink" href="#key-management-flags" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--register</span></kbd></td>
<td><ul class="first last simple">
<li>connects to desired node, fetches and stores their certificate to enable ingress SSL connections</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--migrate-tomcat-credentials-to-esgf</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>moves credentials and supporting security files under {esg_config_dir}</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--generate-ssl-key-and-csr</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first simple">
<li><dl class="first docutils">
<dt>generate new key and cert request files &lt;pub_cert file&gt; &lt;priv_key file&gt; [&lt;dn&gt;]</dt>
<dd>(The ‘dn’ value is of the form - Ex:’/O=ESG/OU=ESGF.ORG/CN={esgf_host}’)</dd>
</dl>
</li>
</ul>
<p class="last">command&gt; $(echo_c -fg magenta “esg_node.py –generate-ssl-key-and-csr {tomcat_conf_dir}/{esgf_host}-esg-node.csr {tomcat_conf_dir}/hostkey.pem /O=ESGF/OU=ESGF.ORG/CN={esgf_host}”)</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--install-ssl-keypair</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>takes as input private key and public cert files and installs them. [&lt;pub_cert&gt; [&lt;priv_key&gt; [&lt;keystore&gt; &lt;alias&gt; &lt;password&gt;]]]</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--fetch-esgf-certs</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>fetches and installs all current public esgf certificates (used by app server and by globus)</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--rebuild-truststore</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>converts globus’ (public) ca certificates into a truststore.</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--add-my-cert-to-truststore</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first simple">
<li>adds public cert from keystore to truststore:</li>
</ul>
<p class="last">(secondary flags for this option)
–keystore | -ks &lt;keystore file&gt;
–keystore-pass | -kpass &lt;keystore password&gt;
–alias | -a &lt;keystore alias&gt;
–truststore | -ts &lt;truststore file&gt;
–truststore-pass | tpass &lt;truststore password&gt;</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--clear-certs</span></kbd></td>
<td><ul class="first last simple">
<li>removes the user-level public certificates’ directory (used by myproxy)</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--check-certs</span></kbd></td>
<td><ul class="first last simple">
<li>checks both SSL private certificate and Globus private cert for expiration</li>
</ul>
</td></tr>
</tbody>
</table>
<p>–set-auto-fetch-certs [true|false]   - sets if federation certificates are loaded automatically upon startup</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--dname</span></kbd></td>
<td><ul class="first simple">
<li>specify the certificate distinguished name to be used when creating certificates</li>
</ul>
<p class="last">(the DN value is of the form: “CN=node.lab.gov, OU=simpleCA-pcmdi3.llnl.gov, OU=GlobusTest, O=Grid”)</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--keystore-password</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>sets the password to use for the java keystore - default is the node password.</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--keystore-alias</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>the alias that is associated with the public cert in the keystore</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--keystore-file</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>specify what the keystore file should be - default $CATALINA_HOME/tomcat/conf/keystore-tomcat</li>
</ul>
</td></tr>
</tbody>
</table>
<p>(misc. globus related)
–simpleCA-relink - relink orphaned simpleCA configuration symbolic file links.</p>
</div>
<div class="section" id="database-management">
<h2>Database Management<a class="headerlink" href="#database-management" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--config-db</span></kbd></td>
<td><ul class="first last simple">
<li>provides database only configuration to support based on note type (see –get-type)</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--backup-db</span></kbd></td>
<td><ul class="first simple">
<li>creates a backup of node database to file</li>
</ul>
<p class="last">the prefix for all schemas provided is “<a href="#id1"><span class="problematic" id="id2">esgf_</span></a>” Ex: -s foo will reference schema esgf_foo [-s|–schema] &lt;schema suffix&gt; [-db|–database] &lt;database name&gt;</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--restore-db</span></kbd></td>
<td><ul class="first last simple">
<li>restores from (nth) backup of database [-n] &lt;the nth backup&gt; (default is n=1 or the last / most recent backup, 1 &lt;= n &lt;= 7) [-s|–schema] &lt;schema suffix&gt; [-db|–database] &lt;database name&gt;</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="trouble-shooting">
<h2>Trouble Shooting<a class="headerlink" href="#trouble-shooting" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--verify-thredds-credentials</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>if there is a thredds/publisher “re-init” issue this will fix it</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="other">
<h2>Other<a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--shell</span></kbd></td>
<td><ul class="first last simple">
<li>invokes the esgf shell (esgf-sh) to provide a command line REPL inteface to the node</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="node-life-cycle-flags">
<h2>Node Life Cycle Flags:<a class="headerlink" href="#node-life-cycle-flags" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>start</td>
<td>start the node’s services</td>
</tr>
<tr class="row-odd"><td>stop</td>
<td>stops the node’s services</td>
</tr>
<tr class="row-even"><td>status</td>
<td>status on node’s services</td>
</tr>
<tr class="row-odd"><td>restart</td>
<td>restarts the node’s services (calls stop then start :-/)</td>
</tr>
<tr class="row-even"><td>update</td>
<td>update’s the node’s software stack to prescribed versions</td>
</tr>
</tbody>
</table>
<p>(notice, no “–” flag prefix to make rc friendly also chkconfig-able ;-)</p>
<p>To add this script to the linux boot sequence: (as root)</p>
<ol class="arabic simple">
<li>cd /etc/init.d</li>
<li>cp ${install_prefix}/bin/esg_node.py .</li>
<li>chkconfig –add esg_node.py</li>
<li>chkconfig –list esg_node.py</li>
</ol>
<p>“stop” | “start” | “status” are meant to be run independent of other flags (and put LAST if other flags are used)
“–install” may be used with “–verify” but neither are not intended for use with stop or start or status</p>
<p>Ex:</p>
<ul class="simple">
<li>esg_node.py –install</li>
<li>esg_node.py –verify</li>
<li>esg_node.py –install –verify</li>
<li>esg_node.py –write-env OR</li>
<li>esg_node.py –version OR</li>
<li>esg_node.py –clear OR</li>
<li>esg_node.py –test-pub OR</li>
<li>esg_node.py –info OR</li>
<li>esg_node.py –register [hostname of node] ([truststore passwd])</li>
<li>esg_node.py –gridftp-config [ bdm &amp;| end-user ]</li>
<li>esg_node.py start OR</li>
<li>esg_node.py –gridftp-config [ bdm &amp;| end-user ] start OR</li>
<li>esg_node.py stop  OR</li>
<li>esg_node.py status OR</li>
</ul>
<p>NOTE:</p>
<p>You must be root or effectively root to run this program,
prefixing the command with sudo will not allow the use of
needed environment variables!!!! If you must use sudo, do so
only to become root proper then source your user’s .[bash]rc
file so that root has it’s environment set accordingly!  Or you
can more simply become root using sudo’s “-s” flag.  After a
full install there will be a file created (/etc/esg.env) that has
the basic environment vars that were used and set during the
installation - this should be sourced by users of this
application stack.</p>
</div>
<div class="section" id="key-environment-vars">
<h2>Key Environment Vars:<a class="headerlink" href="#key-environment-vars" title="Permalink to this headline">¶</a></h2>
<p>The following variables are written to the /etc/esg.env file
which sets up the installation environment.  The ‘OFFICIAL’
names (not the [common_names]) should be used in that file.</p>
<p>(Nomenclature: OFFICIAL_ENV_VARIABLE_NAME [common_name] : either can be set; common name overrules)</p>
<dl class="docutils">
<dt>ESGF_HOME [esg_root_dir]</dt>
<dd>The location where configuration files are kept (the node’s state)
(default - /esg  currently:$esg_root_dir)</dd>
<dt>ESGF_INSTALL_PREFIX [install_prefix]</dt>
<dd>Top level directory where core node artifacts are installed
(default - /usr/local - currently:$install_prefix)</dd>
<dt>ESGF_INSTALL_WORKDIR [workdir]</dt>
<dd>Top level directory where core node artifacts are downloaded and built
(default - $ESGF_USER_HOME/workbench/esg  - currently:$workdir)</dd>
<dt>ESGF_USER_HOME [installer_home]</dt>
<dd>Directory where the installation user’s home directory is.
Here for historical reasons when this user’s home was used to download and build artifacts.
It prefixes the ESGF_INSTALL_DIR [workdir] if it is not explicitly set
(default - /usr/local/src/esgf  - currently:$installer_home)</dd>
</dl>
</div>
<div class="section" id="typical-usage">
<h2>Typical usage:<a class="headerlink" href="#typical-usage" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Installation : esg_node.py –install –verify (submit csr and get back returned cert)</li>
<li>Credentials  : esg_node.py –install-ssl-keypair &lt;pub_cert&gt; &lt;priv_key&gt;</li>
<li>Test Publish : esg_node.py –test-pub</li>
<li>Update Certs : esg_node.py [–force] –rebuild-truststore</li>
<li>Life Cycle   : esg_node.py [start|stop|status|restart|update]</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="autoinstall_usage.html" class="btn btn-neutral float-right" title="Autoinstaller Configuration Options" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cert_howto.html" class="btn btn-neutral" title="ESGF Certificate Management" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, William Hill

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>