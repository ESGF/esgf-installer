

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ESGF Command Line Interface &mdash; esgf-installer alpha documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ESGF CLI" href="cli.html" />
    <link rel="prev" title="ESGF Certificate Management" href="cert_howto.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> esgf-installer
          

          
          </a>

          
            
            
              <div class="version">
                3.0.0-alpha
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html#autoinstaller">Autoinstaller</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert_howto.html">ESGF Certificate Management</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ESGF Command Line Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#configuration-type-selection">Configuration Type Selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#federation-node-relationship-flags">Federation / Node Relationship Flags:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#security-policy">Security Policy…</a></li>
<li class="toctree-l2"><a class="reference internal" href="#index-search-utils">Index (search) Utils…</a></li>
<li class="toctree-l2"><a class="reference internal" href="#publication-endpoint-setting-index-peer">Publication Endpoint Setting (Index Peer)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#idp-endpoint-setting-idp-peer">IDP Endpoint Setting (IDP Peer)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#globus-tool-management">Globus Tool Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#key-management-flags">Key Management Flags:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#database-management">Database Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trouble-shooting">Trouble Shooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other">Other</a></li>
<li class="toctree-l2"><a class="reference internal" href="#node-life-cycle-flags">Node Life Cycle Flags:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#key-environment-vars">Key Environment Vars:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#typical-usage">Typical usage:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">ESGF CLI</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">Base Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html#data-node-components">Data Node Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html#index-node-components">Index Node Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html#idp-node-components">IDP Node Components</a></li>
</ul>
<p class="caption"><span class="caption-text">Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="issues.html">ESGF Installer Issue Tracking Guidelines</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contribute_docs.html">Contributing to Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">esgf-installer</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>ESGF Command Line Interface</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="esgf-command-line-interface">
<h1>ESGF Command Line Interface<a class="headerlink" href="#esgf-command-line-interface" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>This program must be run as root or a root equiv shell: (sudo -s)</li>
<li>Deprecated flags are in $(echo_fail red), and followed by an “<a href="#id1"><span class="problematic" id="id2">*</span></a>”.</li>
</ul>
<p>esg_node.py ([–&lt;directive&gt;] | [start] | [stop] | [status] | [restart]</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--install</span></kbd></td>
<td><ul class="first last simple">
<li>goes through the installation process; will automatically start up node services</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--verify</span></kbd></td>
<td><ul class="first last simple">
<li>runs the test code to verify installation</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--write-env</span></kbd></td>
<td><ul class="first last simple">
<li>writes the necessary env vars to /etc/esg.env</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--version</span></kbd></td>
<td><ul class="first last simple">
<li>indicates the version of this script</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--check</span></kbd></td>
<td><ul class="first last simple">
<li>checks if this script is the most up-to-date posted &lt;u|c|X&gt; (Update|Continue|eXit)</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--clear</span></kbd></td>
<td><ul class="first last simple">
<li>removes the file holding the environment state of last install</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--test-pub</span></kbd></td>
<td><ul class="first last simple">
<li>performs the publication test directly (same publication called in last step of install)</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--info</span></kbd></td>
<td><ul class="first last simple">
<li>provides a brief explanation of the DataNode</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--update</span></kbd></td>
<td><ul class="first last simple">
<li>updates the node manager</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--force</span></kbd></td>
<td><ul class="first last simple">
<li>will allow execution of installation|update code to be executed beyond the up2date checks. Basically allowing an installation|update as if starting from scratch.</li>
</ul>
</td></tr>
</tbody>
</table>
<div class="section" id="configuration-type-selection">
<h2>Configuration Type Selection<a class="headerlink" href="#configuration-type-selection" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--type</span>, <span class="option">-t <var>&lt;data &amp;| index &amp;| idp &amp;| compute&gt;</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>Select type of node: “data” node, “index” node, “idp” (identity provider) node and/or “compute” node(note: there is no default one must be selected at least initially…when in doubt use “data”)</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--set-type</span></kbd></td>
<td>&lt;data &amp;| index &amp;| idp &amp;| compute&gt;   - Sets the type value to be used at next start up</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--get-type</span></kbd></td>
<td><ul class="first last simple">
<li>returns the last stored type code value of the last run node configuration (note: (s|g)et-type flags are singular command flags, meaning they are NOT meant to work with other flags on the same command line!)</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="federation-node-relationship-flags">
<h2>Federation / Node Relationship Flags:<a class="headerlink" href="#federation-node-relationship-flags" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--set-default-peer <var>&lt;hostname of peer to be default&gt;</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>configures the default peer</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--get-default-peer</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>tells you this node’s currently configured default peer</li>
</ul>
</td></tr>
</tbody>
</table>
<blockquote>
<div><ul class="simple">
<li>configures the peer group</li>
</ul>
</div></blockquote>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--get-peer-group</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>tells you this node’s currenly configured peer group(s)</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--federation-sanity-check</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>tells you if your node’s configured peer groups intersect with default peer</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--spotcheck</span></kbd></td>
<td><ul class="first last simple">
<li>provides basic federation mesh (inter-connectivity) information. (see esgf-spotcheck script directly)</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="security-policy">
<h2>Security Policy…<a class="headerlink" href="#security-policy" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--policy-check <var>&lt;resource string&gt;</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>returns the list of policies that are triggered by the provided resource</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="index-search-utils">
<h2>Index (search) Utils…<a class="headerlink" href="#index-search-utils" title="Permalink to this headline">¶</a></h2>
<p>–optimize-index [–force]              - optimizes search index for “index” nodes (must be called local to index node)
–crawl                                 - ingest remote catalogs and their descendants into local index for searching.
–add-replica-shard  &lt;host&gt;[:&lt;port&gt;]    - creates a local replica index of the index at the given &lt;host&gt; mapping to local &lt;port&gt;
–remove-replica-shard &lt;host&gt;[:&lt;port&gt;]  - removes the local replica index bound to &lt;port&gt; named by &lt;host&gt;
–list-shards                           - shows list of registered local replica indexes
–init-shards                           - adds all shards listed in the replica shard configuration file
–check-shards                          - checks the configuration for local replica indexes
–time-shards                           - cycles through all known index shards providing query times for each</p>
<blockquote>
<div>[-show-local] will show timing information for locally replicated shards
[-timeout &lt;seconds&gt;] will set the connection timeout value (in seconds)</div></blockquote>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--update-publisher-resources</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>update local repository of publication schemas et al.</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="publication-endpoint-setting-index-peer">
<h2>Publication Endpoint Setting (Index Peer)<a class="headerlink" href="#publication-endpoint-setting-index-peer" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--set-index-peer <var>&lt;hostname of the index peer you wish to publish to&gt;</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>set index peer Ex: pcmdi.llnl.gov</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--get-index-peer</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>tells you where this node is indexing it’s data</li>
</ul>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="idp-endpoint-setting-idp-peer">
<h2>IDP Endpoint Setting (IDP Peer)<a class="headerlink" href="#idp-endpoint-setting-idp-peer" title="Permalink to this headline">¶</a></h2>
<p>–set-idp-peer | –set-admin-peer       - make selection from menu or input information for idp peer you wish to present credentials to]
–get-idp-peer                          - tells you where this node is authenticating against.</p>
</div>
<div class="section" id="globus-tool-management">
<h2>Globus Tool Management<a class="headerlink" href="#globus-tool-management" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--no-globus</span></kbd></td>
<td><ul class="first last simple">
<li>will not perform any operations affecting globus tools (for those with existing globus setups)</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--gridftp-config</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>[ bdm &amp;| end-user ] (defaults to both)</li>
</ul>
</td></tr>
</tbody>
</table>
<p>–myproxy - [gen-self-cert] &lt;dir&gt; | [regen-simpleca] [fetch-certs|gen-self-cert|keep-certs] | [install|update]</p>
</div>
<div class="section" id="key-management-flags">
<h2>Key Management Flags:<a class="headerlink" href="#key-management-flags" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--register</span></kbd></td>
<td><ul class="first last simple">
<li>connects to desired node, fetches and stores their certificate to enable ingress SSL connections</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--migrate-tomcat-credentials-to-esgf</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>moves credentials and supporting security files under {esg_config_dir}</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--generate-ssl-key-and-csr</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first simple">
<li><dl class="first docutils">
<dt>generate new key and cert request files &lt;pub_cert file&gt; &lt;priv_key file&gt; [&lt;dn&gt;]</dt>
<dd>(The ‘dn’ value is of the form - Ex:’/O=ESG/OU=ESGF.ORG/CN={esgf_host}’)</dd>
</dl>
</li>
</ul>
<p class="last">command&gt; $(echo_c -fg magenta “esg_node.py –generate-ssl-key-and-csr {tomcat_conf_dir}/{esgf_host}-esg-node.csr {tomcat_conf_dir}/hostkey.pem /O=ESGF/OU=ESGF.ORG/CN={esgf_host}”)</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--install-ssl-keypair</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>takes as input private key and public cert files and installs them. [&lt;pub_cert&gt; [&lt;priv_key&gt; [&lt;keystore&gt; &lt;alias&gt; &lt;password&gt;]]]</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--fetch-esgf-certs</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>fetches and installs all current public esgf certificates (used by app server and by globus)</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--rebuild-truststore</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>converts globus’ (public) ca certificates into a truststore.</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--add-my-cert-to-truststore</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first simple">
<li>adds public cert from keystore to truststore:</li>
</ul>
<p class="last">(secondary flags for this option)
–keystore | -ks &lt;keystore file&gt;
–keystore-pass | -kpass &lt;keystore password&gt;
–alias | -a &lt;keystore alias&gt;
–truststore | -ts &lt;truststore file&gt;
–truststore-pass | tpass &lt;truststore password&gt;</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--clear-certs</span></kbd></td>
<td><ul class="first last simple">
<li>removes the user-level public certificates’ directory (used by myproxy)</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--check-certs</span></kbd></td>
<td><ul class="first last simple">
<li>checks both SSL private certificate and Globus private cert for expiration</li>
</ul>
</td></tr>
</tbody>
</table>
<p>–set-auto-fetch-certs [true|false]   - sets if federation certificates are loaded automatically upon startup</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--dname</span></kbd></td>
<td><ul class="first simple">
<li>specify the certificate distinguished name to be used when creating certificates</li>
</ul>
<p class="last">(the DN value is of the form: “CN=node.lab.gov, OU=simpleCA-pcmdi3.llnl.gov, OU=GlobusTest, O=Grid”)</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--keystore-password</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>sets the password to use for the java keystore - default is the node password.</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--keystore-alias</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>the alias that is associated with the public cert in the keystore</li>
</ul>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--keystore-file</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><ul class="first last simple">
<li>specify what the keystore file should be - default $CATALINA_HOME/tomcat/conf/keystore-tomcat</li>
</ul>
</td></tr>
</tbody>
</table>
<p>(misc. globus related)
–simpleCA-relink - relink orphaned simpleCA configuration symbolic file links.</p>
</div>
<div class="section" id="database-management">
<h2>Database Management<a class="headerlink" href="#database-management" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--config-db</span></kbd></td>
<td><ul class="first last simple">
<li>provides database only configuration to support based on note type (see –get-type)</li>
</ul>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--backup-db</span></kbd></td>
<td><ul class="first simple">
<li>creates a backup of node database to file</li>
</ul>
<p class="last">the prefix for all schemas provided is “<a href="#id25"><span class="problematic" id="id26">esgf_</span></a>” Ex: -s foo will reference schema esgf_foo
[-s|–schema] &lt;schema suffix&gt;
[-db|–database] &lt;database name&gt;</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--restore-db</span></kbd></td>
<td><ul class="first simple">
<li>restores from (nth) backup of database</li>
</ul>
<p class="last">[-n] &lt;the nth backup&gt; (default is n=1 or the last / most recent backup, 1 &lt;= n &lt;= 7)
[-s|–schema] &lt;schema suffix&gt;
[-db|–database] &lt;database name&gt;</p>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="trouble-shooting">
<h2>Trouble Shooting<a class="headerlink" href="#trouble-shooting" title="Permalink to this headline">¶</a></h2>
<p>–verify-thredds-credentials - if there is a thredds/publisher “re-init” issue this will fix it</p>
</div>
<div class="section" id="other">
<h2>Other<a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h2>
<p>–shell - invokes the esgf shell (esgf-sh) to provide a command line REPL inteface to the node</p>
</div>
<div class="section" id="node-life-cycle-flags">
<h2>Node Life Cycle Flags:<a class="headerlink" href="#node-life-cycle-flags" title="Permalink to this headline">¶</a></h2>
<p>start   - start the node’s services
stop    - stops the node’s services
status  - status on node’s services
restart - restarts the node’s services (calls stop then start :-/)
update  - update’s the node’s software stack to prescribed versions
(notice, no “–” flag prefix to make rc friendly also chkconfig-able ;-)</p>
<p>&gt; cp ${install_prefix}/bin/esg_node.py .
&gt; chkconfig –add esg_node.py
&gt; chkconfig –list esg_node.py
——————————-</p>
<p>“stop” | “start” | “status” are meant to be run independent of other flags (and put LAST if other flags are used)
“–install” may be used with “–verify” but neither are not intended for use
with stop or start or status
Ex:
esg_node.py –install OR
esg_node.py –verify OR
esg_node.py –install –verify  OR
esg_node.py –write-env OR
esg_node.py –version OR
esg_node.py –clear OR
esg_node.py –test-pub OR
esg_node.py –info OR
esg_node.py –register [hostname of node] ([truststore passwd])
esg_node.py –gridftp-config [ bdm &amp;| end-user ]
esg_node.py start OR
esg_node.py –gridftp-config [ bdm &amp;| end-user ] start OR
esg_node.py stop  OR
esg_node.py status OR</p>
<p>NOTE:</p>
<p><a href="#id3"><span class="problematic" id="id4">*</span></a>You must be root or effectively root to run this program,
<a href="#id5"><span class="problematic" id="id6">*</span></a>prefixing the command with sudo will not allow the use of
<a href="#id7"><span class="problematic" id="id8">*</span></a>needed environment variables!!!! If you must use sudo, do so
<a href="#id9"><span class="problematic" id="id10">*</span></a>only to become root proper then source your user’s .[bash]rc
<a href="#id11"><span class="problematic" id="id12">*</span></a>file so that root has it’s environment set accordingly!  Or you
<a href="#id13"><span class="problematic" id="id14">*</span></a>can more simply become root using sudo’s “-s” flag.  After a
<a href="#id15"><span class="problematic" id="id16">*</span></a>full install there will be a file created (/etc/esg.env) that has
<a href="#id17"><span class="problematic" id="id18">*</span></a>the basic environment vars that were used and set during the
<a href="#id19"><span class="problematic" id="id20">*</span></a>installation - this should be sourced by users of this
<a href="#id21"><span class="problematic" id="id22">*</span></a>application stack.</p>
</div>
<div class="section" id="key-environment-vars">
<h2>Key Environment Vars:<a class="headerlink" href="#key-environment-vars" title="Permalink to this headline">¶</a></h2>
<p>The following variables are written to the $(echo_ok /etc/esg.env) file
which sets up the installation environment.  The ‘OFFICIAL’
names (not the [common_names]) should be used in that file.</p>
<p>(Nomenclature: OFFICIAL_ENV_VARIABLE_NAME [common_name] : either can be set; common name overrules)</p>
<dl class="docutils">
<dt>$(echo_ok ESGF_HOME) [esg_root_dir]</dt>
<dd>The location where configuration files are kept (the node’s state)
(default - /esg  currently:$esg_root_dir)</dd>
<dt>$(echo_ok ESGF_INSTALL_PREFIX) [install_prefix]</dt>
<dd>Top level directory where core node artifacts are installed
(default - /usr/local - currently:$install_prefix)</dd>
<dt>$(echo_ok ESGF_INSTALL_WORKDIR) [workdir]</dt>
<dd>Top level directory where core node artifacts are downloaded and built
(default - $ESGF_USER_HOME/workbench/esg  - currently:$workdir)</dd>
<dt>$(echo_strong ESGF_USER_HOME) [installer_home]</dt>
<dd>Directory where the installation user’s home directory is.
Here for historical reasons when this user’s home was used to download and build artifacts.
It prefixes the ESGF_INSTALL_DIR [workdir] if it is not explicitly set
(default - /usr/local/src/esgf  - currently:$installer_home)</dd>
</dl>
</div>
<div class="section" id="typical-usage">
<h2>Typical usage:<a class="headerlink" href="#typical-usage" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Installation <span class="classifier-delimiter">:</span> <span class="classifier">esg_node.py –install –verify</span></dt>
<dd>(submit csr and get back returned cert)</dd>
</dl>
<p>Credentials  : esg_node.py –install-ssl-keypair &lt;pub_cert&gt; &lt;priv_key&gt;
Test Publish : esg_node.py –test-pub
Update Certs : esg_node.py [–force] –rebuild-truststore
Life Cycle   : esg_node.py [start|stop|status|restart|update]</p>
<blockquote>
<div>___ ___  ___ ___</div></blockquote>
<div class="line-block">
<div class="line">__/ __|/ __| __|</div>
<div class="line">_|__ (_ | _|</div>
</div>
<p><a href="#id23"><span class="problematic" id="id24">|___|___/\___|_|</span></a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cli.html" class="btn btn-neutral float-right" title="ESGF CLI" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cert_howto.html" class="btn btn-neutral" title="ESGF Certificate Management" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, William Hill.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'alpha',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>